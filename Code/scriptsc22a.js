(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory)}else if(typeof exports==='object'){module.exports=factory}else{factory(jQuery)}}(function($){var toFix=['wheel','mousewheel','DOMMouseScroll','MozMousePixelScroll'],toBind=('onwheel' in document||document.documentMode>=9)?['wheel']:['mousewheel','DomMouseScroll','MozMousePixelScroll'],slice=Array.prototype.slice,nullLowestDeltaTimeout,lowestDelta;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks}}
var special=$.event.special.mousewheel={version:'3.1.12',setup:function(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,!1)}}else{this.onmousewheel=handler}
$.data(this,'mousewheel-line-height',special.getLineHeight(this));$.data(this,'mousewheel-page-height',special.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,!1)}}else{this.onmousewheel=null}
$.removeData(this,'mousewheel-line-height');$.removeData(this,'mousewheel-page-height')},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem['offsetParent' in $.fn?'offsetParent':'parent']();if(!$parent.length){$parent=$('body')}
return parseInt($parent.css('fontSize'),10)||parseInt($elem.css('fontSize'),10)||16},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};$.fn.extend({mousewheel:function(fn){return fn?this.bind('mousewheel',fn):this.trigger('mousewheel')},unmousewheel:function(fn){return this.unbind('mousewheel',fn)}});function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;event=$.event.fix(orgEvent);event.type='mousewheel';if('detail' in orgEvent){deltaY=orgEvent.detail*-1}
if('wheelDelta' in orgEvent){deltaY=orgEvent.wheelDelta}
if('wheelDeltaY' in orgEvent){deltaY=orgEvent.wheelDeltaY}
if('wheelDeltaX' in orgEvent){deltaX=orgEvent.wheelDeltaX*-1}
if('axis' in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaX=deltaY*-1;deltaY=0}
delta=deltaY===0?deltaX:deltaY;if('deltaY' in orgEvent){deltaY=orgEvent.deltaY*-1;delta=deltaY}
if('deltaX' in orgEvent){deltaX=orgEvent.deltaX;if(deltaY===0){delta=deltaX*-1}}
if(deltaY===0&&deltaX===0){return}
if(orgEvent.deltaMode===1){var lineHeight=$.data(this,'mousewheel-line-height');delta*=lineHeight;deltaY*=lineHeight;deltaX*=lineHeight}else if(orgEvent.deltaMode===2){var pageHeight=$.data(this,'mousewheel-page-height');delta*=pageHeight;deltaY*=pageHeight;deltaX*=pageHeight}
absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;if(shouldAdjustOldDeltas(orgEvent,absDelta)){lowestDelta/=40}}
if(shouldAdjustOldDeltas(orgEvent,absDelta)){delta/=40;deltaX/=40;deltaY/=40}
delta=Math[delta>=1?'floor':'ceil'](delta/lowestDelta);deltaX=Math[deltaX>=1?'floor':'ceil'](deltaX/lowestDelta);deltaY=Math[deltaY>=1?'floor':'ceil'](deltaY/lowestDelta);if(special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left;offsetY=event.clientY-boundingRect.top}
event.deltaX=deltaX;event.deltaY=deltaY;event.deltaFactor=lowestDelta;event.offsetX=offsetX;event.offsetY=offsetY;event.deltaMode=0;args.unshift(event,delta,deltaX,deltaY);if(nullLowestDeltaTimeout){clearTimeout(nullLowestDeltaTimeout)}
nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200);return($.event.dispatch||$.event.handle).apply(this,args)}
function nullLowestDelta(){lowestDelta=null}
function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&orgEvent.type==='mousewheel'&&absDelta%120===0}}));(function(window){var slice=Array.prototype.slice;function noop(){}
function defineBridget($){if(!$){return}
function addOptionMethod(PluginClass){if(PluginClass.prototype.option){return}
PluginClass.prototype.option=function(opts){if(!$.isPlainObject(opts)){return}
this.options=$.extend(!0,this.options,opts)}}
var logError=typeof console==='undefined'?noop:function(message){console.error(message)};function bridge(namespace,PluginClass){$.fn[namespace]=function(options){if(typeof options==='string'){var args=slice.call(arguments,1);for(var i=0,len=this.length;i<len;i++){var elem=this[i];var instance=$.data(elem,namespace);if(!instance){logError("cannot call methods on "+namespace+" prior to initialization; "+"attempted to call '"+options+"'");continue}
if(!$.isFunction(instance[options])||options.charAt(0)==='_'){logError("no such method '"+options+"' for "+namespace+" instance");continue}
var returnValue=instance[options].apply(instance,args);if(returnValue!==undefined){return returnValue}}
return this}else{return this.each(function(){var instance=$.data(this,namespace);if(instance){instance.option(options);instance._init()}else{instance=new PluginClass(this,options);$.data(this,namespace,instance)}})}}}
$.bridget=function(namespace,PluginClass){addOptionMethod(PluginClass);bridge(namespace,PluginClass)};return $.bridget}
if(typeof define==='function'&&define.amd){define('jquery-bridget/jquery.bridget',['jquery'],defineBridget)}else if(typeof exports==='object'){defineBridget(require('jquery'))}else{defineBridget(window.jQuery)}})(window);(function(window){var docElem=document.documentElement;var bind=function(){};function getIEEvent(obj){var event=window.event;event.target=event.target||event.srcElement||obj;return event}
if(docElem.addEventListener){bind=function(obj,type,fn){obj.addEventListener(type,fn,!1)}}else if(docElem.attachEvent){bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event)}:function(){var event=getIEEvent(obj);fn.call(obj,event)};obj.attachEvent("on"+type,obj[type+fn])}}
var unbind=function(){};if(docElem.removeEventListener){unbind=function(obj,type,fn){obj.removeEventListener(type,fn,!1)}}else if(docElem.detachEvent){unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn]}catch(err){obj[type+fn]=undefined}}}
var eventie={bind:bind,unbind:unbind};if(typeof define==='function'&&define.amd){define('eventie/eventie',eventie)}else if(typeof exports==='object'){module.exports=eventie}else{window.eventie=eventie}})(this);(function(window){var document=window.document;var queue=[];function docReady(fn){if(typeof fn!=='function'){return}
if(docReady.isReady){fn()}else{queue.push(fn)}}
docReady.isReady=!1;function onReady(event){var isIE8NotReady=event.type==='readystatechange'&&document.readyState!=='complete';if(docReady.isReady||isIE8NotReady){return}
trigger()}
function trigger(){docReady.isReady=!0;for(var i=0,len=queue.length;i<len;i++){var fn=queue[i];fn()}}
function defineDocReady(eventie){if(document.readyState==='complete'){trigger()}else{eventie.bind(document,'DOMContentLoaded',onReady);eventie.bind(document,'readystatechange',onReady);eventie.bind(window,'load',onReady)}
return docReady}
if(typeof define==='function'&&define.amd){define('doc-ready/doc-ready',['eventie/eventie'],defineDocReady)}else if(typeof exports==='object'){module.exports=defineDocReady(require('eventie'))}else{window.docReady=defineDocReady(window.eventie)}})(window);(function(){function EventEmitter(){}
var proto=EventEmitter.prototype;var exports=this;var originalGlobalValue=exports.EventEmitter;function indexOfListener(listeners,listener){var i=listeners.length;while(i--){if(listeners[i].listener===listener){return i}}
return-1}
function alias(name){return function aliasClosure(){return this[name].apply(this,arguments)}}
proto.getListeners=function getListeners(evt){var events=this._getEvents();var response;var key;if(evt instanceof RegExp){response={};for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){response[key]=events[key]}}}else{response=events[evt]||(events[evt]=[])}
return response};proto.flattenListeners=function flattenListeners(listeners){var flatListeners=[];var i;for(i=0;i<listeners.length;i+=1){flatListeners.push(listeners[i].listener)}
return flatListeners};proto.getListenersAsObject=function getListenersAsObject(evt){var listeners=this.getListeners(evt);var response;if(listeners instanceof Array){response={};response[evt]=listeners}
return response||listeners};proto.addListener=function addListener(evt,listener){var listeners=this.getListenersAsObject(evt);var listenerIsWrapped=typeof listener==='object';var key;for(key in listeners){if(listeners.hasOwnProperty(key)&&indexOfListener(listeners[key],listener)===-1){listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:!1})}}
return this};proto.on=alias('addListener');proto.addOnceListener=function addOnceListener(evt,listener){return this.addListener(evt,{listener:listener,once:!0})};proto.once=alias('addOnceListener');proto.defineEvent=function defineEvent(evt){this.getListeners(evt);return this};proto.defineEvents=function defineEvents(evts){for(var i=0;i<evts.length;i+=1){this.defineEvent(evts[i])}
return this};proto.removeListener=function removeListener(evt,listener){var listeners=this.getListenersAsObject(evt);var index;var key;for(key in listeners){if(listeners.hasOwnProperty(key)){index=indexOfListener(listeners[key],listener);if(index!==-1){listeners[key].splice(index,1)}}}
return this};proto.off=alias('removeListener');proto.addListeners=function addListeners(evt,listeners){return this.manipulateListeners(!1,evt,listeners)};proto.removeListeners=function removeListeners(evt,listeners){return this.manipulateListeners(!0,evt,listeners)};proto.manipulateListeners=function manipulateListeners(remove,evt,listeners){var i;var value;var single=remove?this.removeListener:this.addListener;var multiple=remove?this.removeListeners:this.addListeners;if(typeof evt==='object'&&!(evt instanceof RegExp)){for(i in evt){if(evt.hasOwnProperty(i)&&(value=evt[i])){if(typeof value==='function'){single.call(this,i,value)}else{multiple.call(this,i,value)}}}}else{i=listeners.length;while(i--){single.call(this,evt,listeners[i])}}
return this};proto.removeEvent=function removeEvent(evt){var type=typeof evt;var events=this._getEvents();var key;if(type==='string'){delete events[evt]}else if(evt instanceof RegExp){for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){delete events[key]}}}else{delete this._events}
return this};proto.removeAllListeners=alias('removeEvent');proto.emitEvent=function emitEvent(evt,args){var listeners=this.getListenersAsObject(evt);var listener;var i;var key;var response;for(key in listeners){if(listeners.hasOwnProperty(key)){i=listeners[key].length;while(i--){listener=listeners[key][i];if(listener.once===!0){this.removeListener(evt,listener.listener)}
response=listener.listener.apply(this,args||[]);if(response===this._getOnceReturnValue()){this.removeListener(evt,listener.listener)}}}}
return this};proto.trigger=alias('emitEvent');proto.emit=function emit(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)};proto.setOnceReturnValue=function setOnceReturnValue(value){this._onceReturnValue=value;return this};proto._getOnceReturnValue=function _getOnceReturnValue(){if(this.hasOwnProperty('_onceReturnValue')){return this._onceReturnValue}else{return!0}};proto._getEvents=function _getEvents(){return this._events||(this._events={})};EventEmitter.noConflict=function noConflict(){exports.EventEmitter=originalGlobalValue;return EventEmitter};if(typeof define==='function'&&define.amd){define('eventEmitter/EventEmitter',[],function(){return EventEmitter})}else if(typeof module==='object'&&module.exports){module.exports=EventEmitter}else{exports.EventEmitter=EventEmitter}}.call(this));(function(window){var prefixes='Webkit Moz ms Ms O'.split(' ');var docElemStyle=document.documentElement.style;function getStyleProperty(propName){if(!propName){return}
if(typeof docElemStyle[propName]==='string'){return propName}
propName=propName.charAt(0).toUpperCase()+propName.slice(1);var prefixed;for(var i=0,len=prefixes.length;i<len;i++){prefixed=prefixes[i]+propName;if(typeof docElemStyle[prefixed]==='string'){return prefixed}}}
if(typeof define==='function'&&define.amd){define('get-style-property/get-style-property',[],function(){return getStyleProperty})}else if(typeof exports==='object'){module.exports=getStyleProperty}else{window.getStyleProperty=getStyleProperty}})(window);(function(window,undefined){function getStyleSize(value){var num=parseFloat(value);var isValid=value.indexOf('%')===-1&&!isNaN(num);return isValid&&num}
function noop(){}
var logError=typeof console==='undefined'?noop:function(message){console.error(message)};var measurements=['paddingLeft','paddingRight','paddingTop','paddingBottom','marginLeft','marginRight','marginTop','marginBottom','borderLeftWidth','borderRightWidth','borderTopWidth','borderBottomWidth'];function getZeroSize(){var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];size[measurement]=0}
return size}
function defineGetSize(getStyleProperty){var isSetup=!1;var getStyle,boxSizingProp,isBoxSizeOuter;function setup(){if(isSetup){return}
isSetup=!0;var getComputedStyle=window.getComputedStyle;getStyle=(function(){var getStyleFn=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle};return function getStyle(elem){var style=getStyleFn(elem);if(!style){logError('Style returned '+style+'. Are you running this code in a hidden iframe on Firefox? '+'See http://bit.ly/getsizebug1')}
return style}})();boxSizingProp=getStyleProperty('boxSizing');if(boxSizingProp){var div=document.createElement('div');div.style.width='200px';div.style.padding='1px 2px 3px 4px';div.style.borderStyle='solid';div.style.borderWidth='1px 2px 3px 4px';div.style[boxSizingProp]='border-box';var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);isBoxSizeOuter=getStyleSize(style.width)===200;body.removeChild(div)}}
function getSize(elem){setup();if(typeof elem==='string'){elem=document.querySelector(elem)}
if(!elem||typeof elem!=='object'||!elem.nodeType){return}
var style=getStyle(elem);if(style.display==='none'){return getZeroSize()}
var size={};size.width=elem.offsetWidth;size.height=elem.offsetHeight;var isBorderBox=size.isBorderBox=!!(boxSizingProp&&style[boxSizingProp]&&style[boxSizingProp]==='border-box');for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];var value=style[measurement];value=mungeNonPixel(elem,value);var num=parseFloat(value);size[measurement]=!isNaN(num)?num:0}
var paddingWidth=size.paddingLeft+size.paddingRight;var paddingHeight=size.paddingTop+size.paddingBottom;var marginWidth=size.marginLeft+size.marginRight;var marginHeight=size.marginTop+size.marginBottom;var borderWidth=size.borderLeftWidth+size.borderRightWidth;var borderHeight=size.borderTopWidth+size.borderBottomWidth;var isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter;var styleWidth=getStyleSize(style.width);if(styleWidth!==!1){size.width=styleWidth+(isBorderBoxSizeOuter?0:paddingWidth+borderWidth)}
var styleHeight=getStyleSize(style.height);if(styleHeight!==!1){size.height=styleHeight+(isBorderBoxSizeOuter?0:paddingHeight+borderHeight)}
size.innerWidth=size.width-(paddingWidth+borderWidth);size.innerHeight=size.height-(paddingHeight+borderHeight);size.outerWidth=size.width+marginWidth;size.outerHeight=size.height+marginHeight;return size}
function mungeNonPixel(elem,value){if(window.getComputedStyle||value.indexOf('%')===-1){return value}
var style=elem.style;var left=style.left;var rs=elem.runtimeStyle;var rsLeft=rs&&rs.left;if(rsLeft){rs.left=elem.currentStyle.left}
style.left=value;value=style.pixelLeft;style.left=left;if(rsLeft){rs.left=rsLeft}
return value}
return getSize}
if(typeof define==='function'&&define.amd){define('get-size/get-size',['get-style-property/get-style-property'],defineGetSize)}else if(typeof exports==='object'){module.exports=defineGetSize(require('desandro-get-style-property'))}else{window.getSize=defineGetSize(window.getStyleProperty)}})(window);(function(ElemProto){var matchesMethod=(function(){if(ElemProto.matchesSelector){return'matchesSelector'}
var prefixes=['webkit','moz','ms','o'];for(var i=0,len=prefixes.length;i<len;i++){var prefix=prefixes[i];var method=prefix+'MatchesSelector';if(ElemProto[method]){return method}}})();function match(elem,selector){return elem[matchesMethod](selector)}
function checkParent(elem){if(elem.parentNode){return}
var fragment=document.createDocumentFragment();fragment.appendChild(elem)}
function query(elem,selector){checkParent(elem);var elems=elem.parentNode.querySelectorAll(selector);for(var i=0,len=elems.length;i<len;i++){if(elems[i]===elem){return!0}}
return!1}
function matchChild(elem,selector){checkParent(elem);return match(elem,selector)}
var matchesSelector;if(matchesMethod){var div=document.createElement('div');var supportsOrphans=match(div,'div');matchesSelector=supportsOrphans?match:matchChild}else{matchesSelector=query}
if(typeof define==='function'&&define.amd){define('matches-selector/matches-selector',[],function(){return matchesSelector})}else if(typeof exports==='object'){module.exports=matchesSelector}else{window.matchesSelector=matchesSelector}})(Element.prototype);(function(window){var getComputedStyle=window.getComputedStyle;var getStyle=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle};function extend(a,b){for(var prop in b){a[prop]=b[prop]}
return a}
function isEmptyObj(obj){for(var prop in obj){return!1}
prop=null;return!0}
function toDash(str){return str.replace(/([A-Z])/g,function($1){return'-'+$1.toLowerCase()})}
function outlayerItemDefinition(EventEmitter,getSize,getStyleProperty){var transitionProperty=getStyleProperty('transition');var transformProperty=getStyleProperty('transform');var supportsCSS3=transitionProperty&&transformProperty;var is3d=!!getStyleProperty('perspective');var transitionEndEvent={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'otransitionend',transition:'transitionend'}[transitionProperty];var prefixableProperties=['transform','transition','transitionDuration','transitionProperty'];var vendorProperties=(function(){var cache={};for(var i=0,len=prefixableProperties.length;i<len;i++){var prop=prefixableProperties[i];var supportedProp=getStyleProperty(prop);if(supportedProp&&supportedProp!==prop){cache[prop]=supportedProp}}
return cache})();function Item(element,layout){if(!element){return}
this.element=element;this.layout=layout;this.position={x:0,y:0};this._create()}
extend(Item.prototype,EventEmitter.prototype);Item.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:'absolute'})};Item.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event)}};Item.prototype.getSize=function(){this.size=getSize(this.element)};Item.prototype.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop]}};Item.prototype.getPosition=function(){var style=getStyle(this.element);var layoutOptions=this.layout.options;var isOriginLeft=layoutOptions.isOriginLeft;var isOriginTop=layoutOptions.isOriginTop;var x=parseInt(style[isOriginLeft?'left':'right'],10);var y=parseInt(style[isOriginTop?'top':'bottom'],10);x=isNaN(x)?0:x;y=isNaN(y)?0:y;var layoutSize=this.layout.size;x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight;y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom;this.position.x=x;this.position.y=y};Item.prototype.layoutPosition=function(){var layoutSize=this.layout.size;var layoutOptions=this.layout.options;var style={};if(layoutOptions.isOriginLeft){style.left=(this.position.x+layoutSize.paddingLeft)+'px';style.right=''}else{style.right=(this.position.x+layoutSize.paddingRight)+'px';style.left=''}
if(layoutOptions.isOriginTop){style.top=(this.position.y+layoutSize.paddingTop)+'px';style.bottom=''}else{style.bottom=(this.position.y+layoutSize.paddingBottom)+'px';style.top=''}
this.css(style);this.emitEvent('layout',[this])};var translate=is3d?function(x,y){return'translate3d('+x+'px, '+y+'px, 0)'}:function(x,y){return'translate('+x+'px, '+y+'px)'};Item.prototype._transitionTo=function(x,y){this.getPosition();var curX=this.position.x;var curY=this.position.y;var compareX=parseInt(x,10);var compareY=parseInt(y,10);var didNotMove=compareX===this.position.x&&compareY===this.position.y;this.setPosition(x,y);if(didNotMove&&!this.isTransitioning){this.layoutPosition();return}
var transX=x-curX;var transY=y-curY;var transitionStyle={};var layoutOptions=this.layout.options;transX=layoutOptions.isOriginLeft?transX:-transX;transY=layoutOptions.isOriginTop?transY:-transY;transitionStyle.transform=translate(transX,transY);this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})};Item.prototype.goTo=function(x,y){this.setPosition(x,y);this.layoutPosition()};Item.prototype.moveTo=supportsCSS3?Item.prototype._transitionTo:Item.prototype.goTo;Item.prototype.setPosition=function(x,y){this.position.x=parseInt(x,10);this.position.y=parseInt(y,10)};Item.prototype._nonTransition=function(args){this.css(args.to);if(args.isCleaning){this._removeStyles(args.to)}
for(var prop in args.onTransitionEnd){args.onTransitionEnd[prop].call(this)}};Item.prototype._transition=function(args){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(args);return}
var _transition=this._transn;for(var prop in args.onTransitionEnd){_transition.onEnd[prop]=args.onTransitionEnd[prop]}
for(prop in args.to){_transition.ingProperties[prop]=!0;if(args.isCleaning){_transition.clean[prop]=!0}}
if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null}
this.enableTransition(args.to);this.css(args.to);this.isTransitioning=!0};var itemTransitionProperties=transformProperty&&(toDash(transformProperty)+',opacity');Item.prototype.enableTransition=function(){if(this.isTransitioning){return}
this.css({transitionProperty:itemTransitionProperties,transitionDuration:this.layout.options.transitionDuration});this.element.addEventListener(transitionEndEvent,this,!1)};Item.prototype.transition=Item.prototype[transitionProperty?'_transition':'_nonTransition'];Item.prototype.onwebkitTransitionEnd=function(event){this.ontransitionend(event)};Item.prototype.onotransitionend=function(event){this.ontransitionend(event)};var dashedVendorProperties={'-webkit-transform':'transform','-moz-transform':'transform','-o-transform':'transform'};Item.prototype.ontransitionend=function(event){if(event.target!==this.element){return}
var _transition=this._transn;var propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;delete _transition.ingProperties[propertyName];if(isEmptyObj(_transition.ingProperties)){this.disableTransition()}
if(propertyName in _transition.clean){this.element.style[event.propertyName]='';delete _transition.clean[propertyName]}
if(propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];onTransitionEnd.call(this);delete _transition.onEnd[propertyName]}
this.emitEvent('transitionEnd',[this])};Item.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(transitionEndEvent,this,!1);this.isTransitioning=!1};Item.prototype._removeStyles=function(style){var cleanStyle={};for(var prop in style){cleanStyle[prop]=''}
this.css(cleanStyle)};var cleanTransitionStyle={transitionProperty:'',transitionDuration:''};Item.prototype.removeTransitionStyles=function(){this.css(cleanTransitionStyle)};Item.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent('remove',[this])};Item.prototype.remove=function(){if(!transitionProperty||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}
var _this=this;this.on('transitionEnd',function(){_this.removeElem();return!0});this.hide()};Item.prototype.reveal=function(){delete this.isHidden;this.css({display:''});var options=this.layout.options;this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:!0})};Item.prototype.hide=function(){this.isHidden=!0;this.css({display:''});var options=this.layout.options;this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){if(this.isHidden){this.css({display:'none'})}}}})};Item.prototype.destroy=function(){this.css({position:'',left:'',right:'',top:'',bottom:'',transition:'',transform:''})};return Item}
if(typeof define==='function'&&define.amd){define('outlayer/item',['eventEmitter/EventEmitter','get-size/get-size','get-style-property/get-style-property'],outlayerItemDefinition)}else if(typeof exports==='object'){module.exports=outlayerItemDefinition(require('wolfy87-eventemitter'),require('get-size'),require('desandro-get-style-property'))}else{window.Outlayer={};window.Outlayer.Item=outlayerItemDefinition(window.EventEmitter,window.getSize,window.getStyleProperty)}})(window);(function(window){var document=window.document;var console=window.console;var jQuery=window.jQuery;var noop=function(){};function extend(a,b){for(var prop in b){a[prop]=b[prop]}
return a}
var objToString=Object.prototype.toString;function isArray(obj){return objToString.call(obj)==='[object Array]'}
function makeArray(obj){var ary=[];if(isArray(obj)){ary=obj}else if(obj&&typeof obj.length==='number'){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i])}}else{ary.push(obj)}
return ary}
var isElement=(typeof HTMLElement==='function'||typeof HTMLElement==='object')?function isElementDOM2(obj){return obj instanceof HTMLElement}:function isElementQuirky(obj){return obj&&typeof obj==='object'&&obj.nodeType===1&&typeof obj.nodeName==='string'};var indexOf=Array.prototype.indexOf?function(ary,obj){return ary.indexOf(obj)}:function(ary,obj){for(var i=0,len=ary.length;i<len;i++){if(ary[i]===obj){return i}}
return-1};function removeFrom(obj,ary){var index=indexOf(ary,obj);if(index!==-1){ary.splice(index,1)}}
function toDashed(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+'-'+$2}).toLowerCase()}
function outlayerDefinition(eventie,docReady,EventEmitter,getSize,matchesSelector,Item){var GUID=0;var instances={};function Outlayer(element,options){if(typeof element==='string'){element=document.querySelector(element)}
if(!element||!isElement(element)){if(console){console.error('Bad '+this.constructor.namespace+' element: '+element)}
return}
this.element=element;this.options=extend({},this.constructor.defaults);this.option(options);var id=++GUID;this.element.outlayerGUID=id;instances[id]=this;this._create();if(this.options.isInitLayout){this.layout()}}
Outlayer.namespace='outlayer';Outlayer.Item=Item;Outlayer.defaults={containerStyle:{position:'relative'},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:'0.4s',hiddenStyle:{opacity:0,transform:'scale(0.001)'},visibleStyle:{opacity:1,transform:'scale(1)'}};extend(Outlayer.prototype,EventEmitter.prototype);Outlayer.prototype.option=function(opts){extend(this.options,opts)};Outlayer.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);extend(this.element.style,this.options.containerStyle);if(this.options.isResizeBound){this.bindResize()}};Outlayer.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)};Outlayer.prototype._itemize=function(elems){var itemElems=this._filterFindItemElements(elems);var Item=this.constructor.Item;var items=[];for(var i=0,len=itemElems.length;i<len;i++){var elem=itemElems[i];var item=new Item(elem,this);items.push(item)}
return items};Outlayer.prototype._filterFindItemElements=function(elems){elems=makeArray(elems);var itemSelector=this.options.itemSelector;var itemElems=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];if(!isElement(elem)){continue}
if(itemSelector){if(matchesSelector(elem,itemSelector)){itemElems.push(elem)}
var childElems=elem.querySelectorAll(itemSelector);for(var j=0,jLen=childElems.length;j<jLen;j++){itemElems.push(childElems[j])}}else{itemElems.push(elem)}}
return itemElems};Outlayer.prototype.getItemElements=function(){var elems=[];for(var i=0,len=this.items.length;i<len;i++){elems.push(this.items[i].element)}
return elems};Outlayer.prototype.layout=function(){this._resetLayout();this._manageStamps();var isInstant=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant);this._isLayoutInited=!0};Outlayer.prototype._init=Outlayer.prototype.layout;Outlayer.prototype._resetLayout=function(){this.getSize()};Outlayer.prototype.getSize=function(){this.size=getSize(this.element)};Outlayer.prototype._getMeasurement=function(measurement,size){var option=this.options[measurement];var elem;if(!option){this[measurement]=0}else{if(typeof option==='string'){elem=this.element.querySelector(option)}else if(isElement(option)){elem=option}
this[measurement]=elem?getSize(elem)[size]:option}};Outlayer.prototype.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items);this._layoutItems(items,isInstant);this._postLayout()};Outlayer.prototype._getItemsForLayout=function(items){var layoutItems=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];if(!item.isIgnored){layoutItems.push(item)}}
return layoutItems};Outlayer.prototype._layoutItems=function(items,isInstant){var _this=this;function onItemsLayout(){_this.emitEvent('layoutComplete',[_this,items])}
if(!items||!items.length){onItemsLayout();return}
this._itemsOn(items,'layout',onItemsLayout);var queue=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];var position=this._getItemLayoutPosition(item);position.item=item;position.isInstant=isInstant||item.isLayoutInstant;queue.push(position)}
this._processLayoutQueue(queue)};Outlayer.prototype._getItemLayoutPosition=function(){return{x:0,y:0}};Outlayer.prototype._processLayoutQueue=function(queue){for(var i=0,len=queue.length;i<len;i++){var obj=queue[i];this._positionItem(obj.item,obj.x,obj.y,obj.isInstant)}};Outlayer.prototype._positionItem=function(item,x,y,isInstant){if(isInstant){item.goTo(x,y)}else{item.moveTo(x,y)}};Outlayer.prototype._postLayout=function(){this.resizeContainer()};Outlayer.prototype.resizeContainer=function(){if(!this.options.isResizingContainer){return}
var size=this._getContainerSize();if(size){this._setContainerMeasure(size.width,!0);this._setContainerMeasure(size.height,!1)}};Outlayer.prototype._getContainerSize=noop;Outlayer.prototype._setContainerMeasure=function(measure,isWidth){if(measure===undefined){return}
var elemSize=this.size;if(elemSize.isBorderBox){measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+elemSize.borderTopWidth+elemSize.borderBottomWidth}
measure=Math.max(measure,0);this.element.style[isWidth?'width':'height']=measure+'px'};Outlayer.prototype._itemsOn=function(items,eventName,callback){var doneCount=0;var count=items.length;var _this=this;function tick(){doneCount++;if(doneCount===count){callback.call(_this)}
return!0}
for(var i=0,len=items.length;i<len;i++){var item=items[i];item.on(eventName,tick)}};Outlayer.prototype.ignore=function(elem){var item=this.getItem(elem);if(item){item.isIgnored=!0}};Outlayer.prototype.unignore=function(elem){var item=this.getItem(elem);if(item){delete item.isIgnored}};Outlayer.prototype.stamp=function(elems){elems=this._find(elems);if(!elems){return}
this.stamps=this.stamps.concat(elems);for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];this.ignore(elem)}};Outlayer.prototype.unstamp=function(elems){elems=this._find(elems);if(!elems){return}
for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];removeFrom(elem,this.stamps);this.unignore(elem)}};Outlayer.prototype._find=function(elems){if(!elems){return}
if(typeof elems==='string'){elems=this.element.querySelectorAll(elems)}
elems=makeArray(elems);return elems};Outlayer.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length){return}
this._getBoundingRect();for(var i=0,len=this.stamps.length;i<len;i++){var stamp=this.stamps[i];this._manageStamp(stamp)}};Outlayer.prototype._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect();var size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)}};Outlayer.prototype._manageStamp=noop;Outlayer.prototype._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect();var thisRect=this._boundingRect;var size=getSize(elem);var offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset};Outlayer.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event)}};Outlayer.prototype.bindResize=function(){if(this.isResizeBound){return}
eventie.bind(window,'resize',this);this.isResizeBound=!0};Outlayer.prototype.unbindResize=function(){if(this.isResizeBound){eventie.unbind(window,'resize',this)}
this.isResizeBound=!1};Outlayer.prototype.onresize=function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout)}
var _this=this;function delayed(){_this.resize();delete _this.resizeTimeout}
this.resizeTimeout=setTimeout(delayed,100)};Outlayer.prototype.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return}
this.layout()};Outlayer.prototype.needsResizeLayout=function(){var size=getSize(this.element);var hasSizes=this.size&&size;return hasSizes&&size.innerWidth!==this.size.innerWidth};Outlayer.prototype.addItems=function(elems){var items=this._itemize(elems);if(items.length){this.items=this.items.concat(items)}
return items};Outlayer.prototype.appended=function(elems){var items=this.addItems(elems);if(!items.length){return}
this.layoutItems(items,!0);this.reveal(items)};Outlayer.prototype.prepended=function(elems){var items=this._itemize(elems);if(!items.length){return}
var previousItems=this.items.slice(0);this.items=items.concat(previousItems);this._resetLayout();this._manageStamps();this.layoutItems(items,!0);this.reveal(items);this.layoutItems(previousItems)};Outlayer.prototype.reveal=function(items){var len=items&&items.length;if(!len){return}
for(var i=0;i<len;i++){var item=items[i];item.reveal()}};Outlayer.prototype.hide=function(items){var len=items&&items.length;if(!len){return}
for(var i=0;i<len;i++){var item=items[i];item.hide()}};Outlayer.prototype.getItem=function(elem){for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];if(item.element===elem){return item}}};Outlayer.prototype.getItems=function(elems){if(!elems||!elems.length){return}
var items=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var item=this.getItem(elem);if(item){items.push(item)}}
return items};Outlayer.prototype.remove=function(elems){elems=makeArray(elems);var removeItems=this.getItems(elems);if(!removeItems||!removeItems.length){return}
this._itemsOn(removeItems,'remove',function(){this.emitEvent('removeComplete',[this,removeItems])});for(var i=0,len=removeItems.length;i<len;i++){var item=removeItems[i];item.remove();removeFrom(item,this.items)}};Outlayer.prototype.destroy=function(){var style=this.element.style;style.height='';style.position='';style.width='';for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];item.destroy()}
this.unbindResize();var id=this.element.outlayerGUID;delete instances[id];delete this.element.outlayerGUID;if(jQuery){jQuery.removeData(this.element,this.constructor.namespace)}};Outlayer.data=function(elem){var id=elem&&elem.outlayerGUID;return id&&instances[id]};Outlayer.create=function(namespace,options){function Layout(){Outlayer.apply(this,arguments)}
if(Object.create){Layout.prototype=Object.create(Outlayer.prototype)}else{extend(Layout.prototype,Outlayer.prototype)}
Layout.prototype.constructor=Layout;Layout.defaults=extend({},Outlayer.defaults);extend(Layout.defaults,options);Layout.prototype.settings={};Layout.namespace=namespace;Layout.data=Outlayer.data;Layout.Item=function LayoutItem(){Item.apply(this,arguments)};Layout.Item.prototype=new Item();docReady(function(){var dashedNamespace=toDashed(namespace);var elems=document.querySelectorAll('.js-'+dashedNamespace);var dataAttr='data-'+dashedNamespace+'-options';for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var attr=elem.getAttribute(dataAttr);var options;try{options=attr&&JSON.parse(attr)}catch(error){if(console){console.error('Error parsing '+dataAttr+' on '+elem.nodeName.toLowerCase()+(elem.id?'#'+elem.id:'')+': '+error)}
continue}
var instance=new Layout(elem,options);if(jQuery){jQuery.data(elem,namespace,instance)}}});if(jQuery&&jQuery.bridget){jQuery.bridget(namespace,Layout)}
return Layout};Outlayer.Item=Item;return Outlayer}
if(typeof define==='function'&&define.amd){define('outlayer/outlayer',['eventie/eventie','doc-ready/doc-ready','eventEmitter/EventEmitter','get-size/get-size','matches-selector/matches-selector','./item'],outlayerDefinition)}else if(typeof exports==='object'){module.exports=outlayerDefinition(require('eventie'),require('doc-ready'),require('wolfy87-eventemitter'),require('get-size'),require('desandro-matches-selector'),require('./item'))}else{window.Outlayer=outlayerDefinition(window.eventie,window.docReady,window.EventEmitter,window.getSize,window.matchesSelector,window.Outlayer.Item)}})(window);(function(window){var indexOf=Array.prototype.indexOf?function(items,value){return items.indexOf(value)}:function(items,value){for(var i=0,len=items.length;i<len;i++){var item=items[i];if(item===value){return i}}
return-1};function masonryDefinition(Outlayer,getSize){var Masonry=Outlayer.create('masonry');Masonry.prototype._resetLayout=function(){this.getSize();this._getMeasurement('columnWidth','outerWidth');this._getMeasurement('gutter','outerWidth');this.measureColumns();var i=this.cols;this.colYs=[];while(i--){this.colYs.push(0)}
this.maxY=0};Masonry.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var firstItem=this.items[0];var firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth}
this.columnWidth+=this.gutter;this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)};Masonry.prototype.getContainerWidth=function(){var container=this.options.isFitWidth?this.element.parentNode:this.element;var size=getSize(container);this.containerWidth=size&&size.innerWidth};Masonry.prototype._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth;var mathMethod=remainder&&remainder<1?'round':'ceil';var colSpan=Math[mathMethod](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);var colGroup=this._getColGroup(colSpan);var minimumY=Math.min.apply(Math,colGroup);var shortColIndex=indexOf(colGroup,minimumY);var position={x:this.columnWidth*shortColIndex,y:minimumY};var setHeight=minimumY+item.size.outerHeight;var setSpan=this.cols+1-colGroup.length;for(var i=0;i<setSpan;i++){this.colYs[shortColIndex+i]=setHeight}
return position};Masonry.prototype._getColGroup=function(colSpan){if(colSpan<2){return this.colYs}
var colGroup=[];var groupCount=this.cols+1-colSpan;for(var i=0;i<groupCount;i++){var groupColYs=this.colYs.slice(i,i+colSpan);colGroup[i]=Math.max.apply(Math,groupColYs)}
return colGroup};Masonry.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp);var offset=this._getElementOffset(stamp);var firstX=this.options.isOriginLeft?offset.left:offset.right;var lastX=firstX+stampSize.outerWidth;var firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1;lastCol=Math.min(this.cols-1,lastCol);var stampMaxY=(this.options.isOriginTop?offset.top:offset.bottom)+stampSize.outerHeight;for(var i=firstCol;i<=lastCol;i++){this.colYs[i]=Math.max(stampMaxY,this.colYs[i])}};Masonry.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};if(this.options.isFitWidth){size.width=this._getContainerFitWidth()}
return size};Masonry.prototype._getContainerFitWidth=function(){var unusedCols=0;var i=this.cols;while(--i){if(this.colYs[i]!==0){break}
unusedCols++}
return(this.cols-unusedCols)*this.columnWidth-this.gutter};Masonry.prototype.needsResizeLayout=function(){var previousWidth=this.containerWidth;this.getContainerWidth();return previousWidth!==this.containerWidth};return Masonry}
if(typeof define==='function'&&define.amd){define(['outlayer/outlayer','get-size/get-size'],masonryDefinition)}else if(typeof exports==='object'){module.exports=masonryDefinition(require('outlayer'),require('get-size'))}else{window.Masonry=masonryDefinition(window.Outlayer,window.getSize)}})(window);(function(factory){if(typeof define==='function'&&define.amd&&define.amd.jQuery){define(['jquery'],factory)}else if(typeof module!=='undefined'&&module.exports){factory(require("jquery"))}else{factory(jQuery)}}(function($){"use strict";var VERSION="1.6.18",LEFT="left",RIGHT="right",UP="up",DOWN="down",IN="in",OUT="out",NONE="none",AUTO="auto",SWIPE="swipe",PINCH="pinch",TAP="tap",DOUBLE_TAP="doubletap",LONG_TAP="longtap",HOLD="hold",HORIZONTAL="horizontal",VERTICAL="vertical",ALL_FINGERS="all",DOUBLE_TAP_THRESHOLD=10,PHASE_START="start",PHASE_MOVE="move",PHASE_END="end",PHASE_CANCEL="cancel",SUPPORTS_TOUCH='ontouchstart' in window,SUPPORTS_POINTER_IE10=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!SUPPORTS_TOUCH,SUPPORTS_POINTER=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!SUPPORTS_TOUCH,PLUGIN_NS='TouchSwipe';var defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0};$.fn.swipe=function(method){var $this=$(this),plugin=$this.data(PLUGIN_NS);if(plugin&&typeof method==='string'){if(plugin[method]){return plugin[method].apply(plugin,Array.prototype.slice.call(arguments,1))}else{$.error('Method '+method+' does not exist on jQuery.swipe')}}else if(plugin&&typeof method==='object'){plugin['option'].apply(plugin,arguments)}else if(!plugin&&(typeof method==='object'||!method)){return init.apply(this,arguments)}
return $this};$.fn.swipe.version=VERSION;$.fn.swipe.defaults=defaults;$.fn.swipe.phases={PHASE_START:PHASE_START,PHASE_MOVE:PHASE_MOVE,PHASE_END:PHASE_END,PHASE_CANCEL:PHASE_CANCEL};$.fn.swipe.directions={LEFT:LEFT,RIGHT:RIGHT,UP:UP,DOWN:DOWN,IN:IN,OUT:OUT};$.fn.swipe.pageScroll={NONE:NONE,HORIZONTAL:HORIZONTAL,VERTICAL:VERTICAL,AUTO:AUTO};$.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:ALL_FINGERS};function init(options){if(options&&(options.allowPageScroll===undefined&&(options.swipe!==undefined||options.swipeStatus!==undefined))){options.allowPageScroll=NONE}
if(options.click!==undefined&&options.tap===undefined){options.tap=options.click}
if(!options){options={}}
options=$.extend({},$.fn.swipe.defaults,options);return this.each(function(){var $this=$(this);var plugin=$this.data(PLUGIN_NS);if(!plugin){plugin=new TouchSwipe(this,options);$this.data(PLUGIN_NS,plugin)}})}
function TouchSwipe(element,options){var options=$.extend({},options);var useTouchEvents=(SUPPORTS_TOUCH||SUPPORTS_POINTER||!options.fallbackToMouseEvents),START_EV=useTouchEvents?(SUPPORTS_POINTER?(SUPPORTS_POINTER_IE10?'MSPointerDown':'pointerdown'):'touchstart'):'mousedown',MOVE_EV=useTouchEvents?(SUPPORTS_POINTER?(SUPPORTS_POINTER_IE10?'MSPointerMove':'pointermove'):'touchmove'):'mousemove',END_EV=useTouchEvents?(SUPPORTS_POINTER?(SUPPORTS_POINTER_IE10?'MSPointerUp':'pointerup'):'touchend'):'mouseup',LEAVE_EV=useTouchEvents?(SUPPORTS_POINTER?'mouseleave':null):'mouseleave',CANCEL_EV=(SUPPORTS_POINTER?(SUPPORTS_POINTER_IE10?'MSPointerCancel':'pointercancel'):'touchcancel');var distance=0,direction=null,currentDirection=null,duration=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,pinchDistance=0,pinchDirection=0,maximumsMap=null;var $element=$(element);var phase="start";var fingerCount=0;var fingerData={};var startTime=0,endTime=0,previousTouchEndTime=0,fingerCountAtRelease=0,doubleTapStartTime=0;var singleTapTimeout=null,holdTimeout=null;try{$element.bind(START_EV,touchStart);$element.bind(CANCEL_EV,touchCancel)}catch(e){$.error('events not supported '+START_EV+','+CANCEL_EV+' on jQuery.swipe')}
this.enable=function(){this.disable();$element.bind(START_EV,touchStart);$element.bind(CANCEL_EV,touchCancel);return $element};this.disable=function(){removeListeners();return $element};this.destroy=function(){removeListeners();$element.data(PLUGIN_NS,null);$element=null};this.option=function(property,value){if(typeof property==='object'){options=$.extend(options,property)}else if(options[property]!==undefined){if(value===undefined){return options[property]}else{options[property]=value}}else if(!property){return options}else{$.error('Option '+property+' does not exist on jQuery.swipe.options')}
return null}
function touchStart(jqEvent){if(getTouchInProgress()){return}
if($(jqEvent.target).closest(options.excludedElements,$element).length>0){return}
var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(event.pointerType&&event.pointerType=="mouse"&&options.fallbackToMouseEvents==!1){return};var ret,touches=event.touches,evt=touches?touches[0]:event;phase=PHASE_START;if(touches){fingerCount=touches.length}else if(options.preventDefaultEvents!==!1){jqEvent.preventDefault()}
distance=0;direction=null;currentDirection=null;pinchDirection=null;duration=0;startTouchesDistance=0;endTouchesDistance=0;pinchZoom=1;pinchDistance=0;maximumsMap=createMaximumsData();cancelMultiFingerRelease();createFingerData(0,evt);if(!touches||(fingerCount===options.fingers||options.fingers===ALL_FINGERS)||hasPinches()){startTime=getTimeStamp();if(fingerCount==2){createFingerData(1,touches[1]);startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)}
if(options.swipeStatus||options.pinchStatus){ret=triggerHandler(event,phase)}}else{ret=!1}
if(ret===!1){phase=PHASE_CANCEL;triggerHandler(event,phase);return ret}else{if(options.hold){holdTimeout=setTimeout($.proxy(function(){$element.trigger('hold',[event.target]);if(options.hold){ret=options.hold.call($element,event,event.target)}},this),options.longTapThreshold)}
setTouchInProgress(!0)}
return null};function touchMove(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(phase===PHASE_END||phase===PHASE_CANCEL||inMultiFingerRelease())
return;var ret,touches=event.touches,evt=touches?touches[0]:event;var currentFinger=updateFingerData(evt);endTime=getTimeStamp();if(touches){fingerCount=touches.length}
if(options.hold){clearTimeout(holdTimeout)}
phase=PHASE_MOVE;if(fingerCount==2){if(startTouchesDistance==0){createFingerData(1,touches[1]);startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)}else{updateFingerData(touches[1]);endTouchesDistance=calculateTouchesDistance(fingerData[0].end,fingerData[1].end);pinchDirection=calculatePinchDirection(fingerData[0].end,fingerData[1].end)}
pinchZoom=calculatePinchZoom(startTouchesDistance,endTouchesDistance);pinchDistance=Math.abs(startTouchesDistance-endTouchesDistance)}
if((fingerCount===options.fingers||options.fingers===ALL_FINGERS)||!touches||hasPinches()){direction=calculateDirection(currentFinger.start,currentFinger.end);currentDirection=calculateDirection(currentFinger.last,currentFinger.end);validateDefaultEvent(jqEvent,currentDirection);distance=calculateDistance(currentFinger.start,currentFinger.end);duration=calculateDuration();setMaxDistance(direction,distance);ret=triggerHandler(event,phase);if(!options.triggerOnTouchEnd||options.triggerOnTouchLeave){var inBounds=!0;if(options.triggerOnTouchLeave){var bounds=getbounds(this);inBounds=isInBounds(currentFinger.end,bounds)}
if(!options.triggerOnTouchEnd&&inBounds){phase=getNextPhase(PHASE_MOVE)}else if(options.triggerOnTouchLeave&&!inBounds){phase=getNextPhase(PHASE_END)}
if(phase==PHASE_CANCEL||phase==PHASE_END){triggerHandler(event,phase)}}}else{phase=PHASE_CANCEL;triggerHandler(event,phase)}
if(ret===!1){phase=PHASE_CANCEL;triggerHandler(event,phase)}}
function touchEnd(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent,touches=event.touches;if(touches){if(touches.length&&!inMultiFingerRelease()){startMultiFingerRelease(event);return!0}else if(touches.length&&inMultiFingerRelease()){return!0}}
if(inMultiFingerRelease()){fingerCount=fingerCountAtRelease}
endTime=getTimeStamp();duration=calculateDuration();if(didSwipeBackToCancel()||!validateSwipeDistance()){phase=PHASE_CANCEL;triggerHandler(event,phase)}else if(options.triggerOnTouchEnd||(options.triggerOnTouchEnd===!1&&phase===PHASE_MOVE)){if(options.preventDefaultEvents!==!1){jqEvent.preventDefault()}
phase=PHASE_END;triggerHandler(event,phase)}else if(!options.triggerOnTouchEnd&&hasTap()){phase=PHASE_END;triggerHandlerForGesture(event,phase,TAP)}else if(phase===PHASE_MOVE){phase=PHASE_CANCEL;triggerHandler(event,phase)}
setTouchInProgress(!1);return null}
function touchCancel(){fingerCount=0;endTime=0;startTime=0;startTouchesDistance=0;endTouchesDistance=0;pinchZoom=1;cancelMultiFingerRelease();setTouchInProgress(!1)}
function touchLeave(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(options.triggerOnTouchLeave){phase=getNextPhase(PHASE_END);triggerHandler(event,phase)}}
function removeListeners(){$element.unbind(START_EV,touchStart);$element.unbind(CANCEL_EV,touchCancel);$element.unbind(MOVE_EV,touchMove);$element.unbind(END_EV,touchEnd);if(LEAVE_EV){$element.unbind(LEAVE_EV,touchLeave)}
setTouchInProgress(!1)}
function getNextPhase(currentPhase){var nextPhase=currentPhase;var validTime=validateSwipeTime();var validDistance=validateSwipeDistance();var didCancel=didSwipeBackToCancel();if(!validTime||didCancel){nextPhase=PHASE_CANCEL}else if(validDistance&&currentPhase==PHASE_MOVE&&(!options.triggerOnTouchEnd||options.triggerOnTouchLeave)){nextPhase=PHASE_END}else if(!validDistance&&currentPhase==PHASE_END&&options.triggerOnTouchLeave){nextPhase=PHASE_CANCEL}
return nextPhase}
function triggerHandler(event,phase){var ret,touches=event.touches;if(didSwipe()||hasSwipes()){ret=triggerHandlerForGesture(event,phase,SWIPE)}
if((didPinch()||hasPinches())&&ret!==!1){ret=triggerHandlerForGesture(event,phase,PINCH)}
if(didDoubleTap()&&ret!==!1){ret=triggerHandlerForGesture(event,phase,DOUBLE_TAP)}else if(didLongTap()&&ret!==!1){ret=triggerHandlerForGesture(event,phase,LONG_TAP)}else if(didTap()&&ret!==!1){ret=triggerHandlerForGesture(event,phase,TAP)}
if(phase===PHASE_CANCEL){touchCancel(event)}
if(phase===PHASE_END){if(touches){if(!touches.length){touchCancel(event)}}else{touchCancel(event)}}
return ret}
function triggerHandlerForGesture(event,phase,gesture){var ret;if(gesture==SWIPE){$element.trigger('swipeStatus',[phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection]);if(options.swipeStatus){ret=options.swipeStatus.call($element,event,phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection);if(ret===!1)return!1}
if(phase==PHASE_END&&validateSwipe()){clearTimeout(singleTapTimeout);clearTimeout(holdTimeout);$element.trigger('swipe',[direction,distance,duration,fingerCount,fingerData,currentDirection]);if(options.swipe){ret=options.swipe.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection);if(ret===!1)return!1}
switch(direction){case LEFT:$element.trigger('swipeLeft',[direction,distance,duration,fingerCount,fingerData,currentDirection]);if(options.swipeLeft){ret=options.swipeLeft.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection)}
break;case RIGHT:$element.trigger('swipeRight',[direction,distance,duration,fingerCount,fingerData,currentDirection]);if(options.swipeRight){ret=options.swipeRight.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection)}
break;case UP:$element.trigger('swipeUp',[direction,distance,duration,fingerCount,fingerData,currentDirection]);if(options.swipeUp){ret=options.swipeUp.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection)}
break;case DOWN:$element.trigger('swipeDown',[direction,distance,duration,fingerCount,fingerData,currentDirection]);if(options.swipeDown){ret=options.swipeDown.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection)}
break}}}
if(gesture==PINCH){$element.trigger('pinchStatus',[phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]);if(options.pinchStatus){ret=options.pinchStatus.call($element,event,phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData);if(ret===!1)return!1}
if(phase==PHASE_END&&validatePinch()){switch(pinchDirection){case IN:$element.trigger('pinchIn',[pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]);if(options.pinchIn){ret=options.pinchIn.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData)}
break;case OUT:$element.trigger('pinchOut',[pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]);if(options.pinchOut){ret=options.pinchOut.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData)}
break}}}
if(gesture==TAP){if(phase===PHASE_CANCEL||phase===PHASE_END){clearTimeout(singleTapTimeout);clearTimeout(holdTimeout);if(hasDoubleTap()&&!inDoubleTap()){doubleTapStartTime=getTimeStamp();singleTapTimeout=setTimeout($.proxy(function(){doubleTapStartTime=null;$element.trigger('tap',[event.target]);if(options.tap){ret=options.tap.call($element,event,event.target)}},this),options.doubleTapThreshold)}else{doubleTapStartTime=null;$element.trigger('tap',[event.target]);if(options.tap){ret=options.tap.call($element,event,event.target)}}}}else if(gesture==DOUBLE_TAP){if(phase===PHASE_CANCEL||phase===PHASE_END){clearTimeout(singleTapTimeout);clearTimeout(holdTimeout);doubleTapStartTime=null;$element.trigger('doubletap',[event.target]);if(options.doubleTap){ret=options.doubleTap.call($element,event,event.target)}}}else if(gesture==LONG_TAP){if(phase===PHASE_CANCEL||phase===PHASE_END){clearTimeout(singleTapTimeout);doubleTapStartTime=null;$element.trigger('longtap',[event.target]);if(options.longTap){ret=options.longTap.call($element,event,event.target)}}}
return ret}
function validateSwipeDistance(){var valid=!0;if(options.threshold!==null){valid=distance>=options.threshold}
return valid}
function didSwipeBackToCancel(){var cancelled=!1;if(options.cancelThreshold!==null&&direction!==null){cancelled=(getMaxDistance(direction)-distance)>=options.cancelThreshold}
return cancelled}
function validatePinchDistance(){if(options.pinchThreshold!==null){return pinchDistance>=options.pinchThreshold}
return!0}
function validateSwipeTime(){var result;if(options.maxTimeThreshold){if(duration>=options.maxTimeThreshold){result=!1}else{result=!0}}else{result=!0}
return result}
function validateDefaultEvent(jqEvent,direction){if(options.preventDefaultEvents===!1){return}
if(options.allowPageScroll===NONE){jqEvent.preventDefault()}else{var auto=options.allowPageScroll===AUTO;switch(direction){case LEFT:if((options.swipeLeft&&auto)||(!auto&&options.allowPageScroll!=HORIZONTAL)){jqEvent.preventDefault()}
break;case RIGHT:if((options.swipeRight&&auto)||(!auto&&options.allowPageScroll!=HORIZONTAL)){jqEvent.preventDefault()}
break;case UP:if((options.swipeUp&&auto)||(!auto&&options.allowPageScroll!=VERTICAL)){jqEvent.preventDefault()}
break;case DOWN:if((options.swipeDown&&auto)||(!auto&&options.allowPageScroll!=VERTICAL)){jqEvent.preventDefault()}
break;case NONE:break}}}
function validatePinch(){var hasCorrectFingerCount=validateFingers();var hasEndPoint=validateEndPoint();var hasCorrectDistance=validatePinchDistance();return hasCorrectFingerCount&&hasEndPoint&&hasCorrectDistance}
function hasPinches(){return!!(options.pinchStatus||options.pinchIn||options.pinchOut)}
function didPinch(){return!!(validatePinch()&&hasPinches())}
function validateSwipe(){var hasValidTime=validateSwipeTime();var hasValidDistance=validateSwipeDistance();var hasCorrectFingerCount=validateFingers();var hasEndPoint=validateEndPoint();var didCancel=didSwipeBackToCancel();var valid=!didCancel&&hasEndPoint&&hasCorrectFingerCount&&hasValidDistance&&hasValidTime;return valid}
function hasSwipes(){return!!(options.swipe||options.swipeStatus||options.swipeLeft||options.swipeRight||options.swipeUp||options.swipeDown)}
function didSwipe(){return!!(validateSwipe()&&hasSwipes())}
function validateFingers(){return((fingerCount===options.fingers||options.fingers===ALL_FINGERS)||!SUPPORTS_TOUCH)}
function validateEndPoint(){return fingerData[0].end.x!==0}
function hasTap(){return!!(options.tap)}
function hasDoubleTap(){return!!(options.doubleTap)}
function hasLongTap(){return!!(options.longTap)}
function validateDoubleTap(){if(doubleTapStartTime==null){return!1}
var now=getTimeStamp();return(hasDoubleTap()&&((now-doubleTapStartTime)<=options.doubleTapThreshold))}
function inDoubleTap(){return validateDoubleTap()}
function validateTap(){return((fingerCount===1||!SUPPORTS_TOUCH)&&(isNaN(distance)||distance<options.threshold))}
function validateLongTap(){return((duration>options.longTapThreshold)&&(distance<DOUBLE_TAP_THRESHOLD))}
function didTap(){return!!(validateTap()&&hasTap())}
function didDoubleTap(){return!!(validateDoubleTap()&&hasDoubleTap())}
function didLongTap(){return!!(validateLongTap()&&hasLongTap())}
function startMultiFingerRelease(event){previousTouchEndTime=getTimeStamp();fingerCountAtRelease=event.touches.length+1}
function cancelMultiFingerRelease(){previousTouchEndTime=0;fingerCountAtRelease=0}
function inMultiFingerRelease(){var withinThreshold=!1;if(previousTouchEndTime){var diff=getTimeStamp()-previousTouchEndTime
if(diff<=options.fingerReleaseThreshold){withinThreshold=!0}}
return withinThreshold}
function getTouchInProgress(){return!!($element.data(PLUGIN_NS+'_intouch')===!0)}
function setTouchInProgress(val){if(!$element){return}
if(val===!0){$element.bind(MOVE_EV,touchMove);$element.bind(END_EV,touchEnd);if(LEAVE_EV){$element.bind(LEAVE_EV,touchLeave)}}else{$element.unbind(MOVE_EV,touchMove,!1);$element.unbind(END_EV,touchEnd,!1);if(LEAVE_EV){$element.unbind(LEAVE_EV,touchLeave,!1)}}
$element.data(PLUGIN_NS+'_intouch',val===!0)}
function createFingerData(id,evt){var f={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};f.start.x=f.last.x=f.end.x=evt.pageX||evt.clientX;f.start.y=f.last.y=f.end.y=evt.pageY||evt.clientY;fingerData[id]=f;return f}
function updateFingerData(evt){var id=evt.identifier!==undefined?evt.identifier:0;var f=getFingerData(id);if(f===null){f=createFingerData(id,evt)}
f.last.x=f.end.x;f.last.y=f.end.y;f.end.x=evt.pageX||evt.clientX;f.end.y=evt.pageY||evt.clientY;return f}
function getFingerData(id){return fingerData[id]||null}
function setMaxDistance(direction,distance){if(direction==NONE)return;distance=Math.max(distance,getMaxDistance(direction));maximumsMap[direction].distance=distance}
function getMaxDistance(direction){if(maximumsMap[direction])return maximumsMap[direction].distance;return undefined}
function createMaximumsData(){var maxData={};maxData[LEFT]=createMaximumVO(LEFT);maxData[RIGHT]=createMaximumVO(RIGHT);maxData[UP]=createMaximumVO(UP);maxData[DOWN]=createMaximumVO(DOWN);return maxData}
function createMaximumVO(dir){return{direction:dir,distance:0}}
function calculateDuration(){return endTime-startTime}
function calculateTouchesDistance(startPoint,endPoint){var diffX=Math.abs(startPoint.x-endPoint.x);var diffY=Math.abs(startPoint.y-endPoint.y);return Math.round(Math.sqrt(diffX*diffX+diffY*diffY))}
function calculatePinchZoom(startDistance,endDistance){var percent=(endDistance/startDistance)*1;return percent.toFixed(2)}
function calculatePinchDirection(){if(pinchZoom<1){return OUT}else{return IN}}
function calculateDistance(startPoint,endPoint){return Math.round(Math.sqrt(Math.pow(endPoint.x-startPoint.x,2)+Math.pow(endPoint.y-startPoint.y,2)))}
function calculateAngle(startPoint,endPoint){var x=startPoint.x-endPoint.x;var y=endPoint.y-startPoint.y;var r=Math.atan2(y,x);var angle=Math.round(r*180/Math.PI);if(angle<0){angle=360-Math.abs(angle)}
return angle}
function calculateDirection(startPoint,endPoint){if(comparePoints(startPoint,endPoint)){return NONE}
var angle=calculateAngle(startPoint,endPoint);if((angle<=45)&&(angle>=0)){return LEFT}else if((angle<=360)&&(angle>=315)){return LEFT}else if((angle>=135)&&(angle<=225)){return RIGHT}else if((angle>45)&&(angle<135)){return DOWN}else{return UP}}
function getTimeStamp(){var now=new Date();return now.getTime()}
function getbounds(el){el=$(el);var offset=el.offset();var bounds={left:offset.left,right:offset.left+el.outerWidth(),top:offset.top,bottom:offset.top+el.outerHeight()}
return bounds}
function isInBounds(point,bounds){return(point.x>bounds.left&&point.x<bounds.right&&point.y>bounds.top&&point.y<bounds.bottom)};function comparePoints(pointA,pointB){return(pointA.x==pointB.x&&pointA.y==pointB.y)}}}));(function($){$.fn.collagePlus=function(options){return this.each(function(){var row=0,elements=[],rownum=1,$this=$(this);$.fn.collagePlus.defaults.albumWidth=$this.width();$.fn.collagePlus.defaults.padding=parseFloat($this.css('padding-left'));$.fn.collagePlus.defaults.images=$this.children();var settings=$.extend({},$.fn.collagePlus.defaults,options);settings.images.each(function(index){var $this=$(this),$img=($this.is("img"))?$this:$(this).find("img");var w=(typeof $img.data("width")!='undefined')?$img.data("width"):$img.width(),h=(typeof $img.data("height")!='undefined')?$img.data("height"):$img.height();var imgParams=getImgProperty($img);$img.data("width",w);$img.data("height",h);var nw=Math.ceil(w/h*settings.targetHeight),nh=Math.ceil(settings.targetHeight);elements.push([this,nw,nh,imgParams.w,imgParams.h]);row+=nw+imgParams.w+settings.padding;if(row>settings.albumWidth&&elements.length!=0){resizeRow(elements,(row-settings.padding),settings,rownum);delete row;delete elements;row=0;elements=[];rownum+=1}
if(settings.images.length-1==index&&elements.length!=0){resizeRow(elements,row,settings,rownum);delete row;delete elements;row=0;elements=[];rownum+=1}})});function resizeRow(obj,row,settings,rownum){var imageExtras=(settings.padding*(obj.length-1))+(obj.length*obj[0][3]),albumWidthAdjusted=settings.albumWidth-imageExtras,overPercent=albumWidthAdjusted/(row-imageExtras),trackWidth=imageExtras,lastRow=(row<settings.albumWidth?!0:!1);for(var i=0;i<obj.length;i++){var $obj=$(obj[i][0]),fw=Math.floor(obj[i][1]*overPercent),fh=Math.floor(obj[i][2]*overPercent),isNotLast=!!((i<obj.length-1));if(settings.allowPartialLastRow===!0&&lastRow===!0){fw=obj[i][1];fh=obj[i][2]}
trackWidth+=fw;if(!isNotLast&&trackWidth<settings.albumWidth){if(settings.allowPartialLastRow===!0&&lastRow===!0){fw=fw}else{fw=fw+(settings.albumWidth-trackWidth)}}
fw--;var $img=($obj.is("img"))?$obj:$obj.find("img");$img.width(fw);if(!$obj.is("img")){$obj.width(fw+obj[i][3])}
$img.height(fh);if(!$obj.is("img")){$obj.height(fh+obj[i][4])}
applyModifications($obj,isNotLast,settings);$img.one('load',function(target){return function(){if(settings.effect=='default'){target.animate({opacity:'1'},{duration:settings.fadeSpeed})}else{if(settings.direction=='vertical'){var sequence=(rownum<=10?rownum:10)}else{var sequence=(i<=9?i+1:10)}
target.removeClass(function(index,css){return(css.match(/\beffect-\S+/g)||[]).join(' ')});target.addClass(settings.effect);target.addClass("effect-duration-"+sequence)}}}($obj)).each(function(){if(this.complete)$(this).trigger('load')})}}
function applyModifications($obj,isNotLast,settings){var css={'margin-bottom':settings.padding+"px",'margin-right':(isNotLast)?settings.padding+"px":"0px",'display':settings.display,'vertical-align':"bottom",'overflow':"hidden"};return $obj.css(css)}
function getImgProperty(img){$img=$(img);var params=new Array();params.w=(parseFloat($img.css("border-left-width"))+parseFloat($img.css("border-right-width")));params.h=(parseFloat($img.css("border-top-width"))+parseFloat($img.css("border-bottom-width")));return params}};$.fn.collagePlus.defaults={'targetHeight':400,'fadeSpeed':"fast",'display':"inline-block",'effect':'default','direction':'vertical','allowPartialLastRow':!1}})(jQuery);(function(window){'use strict';var $=window.jQuery;var console=window.console;var hasConsole=typeof console!=='undefined';function extend(a,b){for(var prop in b){a[prop]=b[prop]}
return a}
var objToString=Object.prototype.toString;function isArray(obj){return objToString.call(obj)==='[object Array]'}
function makeArray(obj){var ary=[];if(isArray(obj)){ary=obj}else if(typeof obj.length==='number'){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i])}}else{ary.push(obj)}
return ary}
function defineImagesLoaded(EventEmitter,eventie){function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded)){return new ImagesLoaded(elem,options)}
if(typeof elem==='string'){elem=document.querySelectorAll(elem)}
this.elements=makeArray(elem);this.options=extend({},this.options);if(typeof options==='function'){onAlways=options}else{extend(this.options,options)}
if(onAlways){this.on('always',onAlways)}
this.getImages();if($){this.jqDeferred=new $.Deferred()}
var _this=this;setTimeout(function(){_this.check()})}
ImagesLoaded.prototype=new EventEmitter();ImagesLoaded.prototype.options={};ImagesLoaded.prototype.getImages=function(){this.images=[];for(var i=0,len=this.elements.length;i<len;i++){var elem=this.elements[i];if(elem.nodeName==='IMG'){this.addImage(elem)}
var childElems=elem.querySelectorAll('img');for(var j=0,jLen=childElems.length;j<jLen;j++){var img=childElems[j];this.addImage(img)}}};ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage)};ImagesLoaded.prototype.check=function(){var _this=this;var checkedCount=0;var length=this.images.length;this.hasAnyBroken=!1;if(!length){this.complete();return}
function onConfirm(image,message){if(_this.options.debug&&hasConsole){console.log('confirm',image,message)}
_this.progress(image);checkedCount++;if(checkedCount===length){_this.complete()}
return!0}
for(var i=0;i<length;i++){var loadingImage=this.images[i];loadingImage.on('confirm',onConfirm);loadingImage.check()}};ImagesLoaded.prototype.progress=function(image){this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;var _this=this;setTimeout(function(){_this.emit('progress',_this,image);if(_this.jqDeferred){_this.jqDeferred.notify(_this,image)}})};ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?'fail':'done';this.isComplete=!0;var _this=this;setTimeout(function(){_this.emit(eventName,_this);_this.emit('always',_this);if(_this.jqDeferred){var jqMethod=_this.hasAnyBroken?'reject':'resolve';_this.jqDeferred[jqMethod](_this)}})};if($){$.fn.imagesLoaded=function(options,callback){var instance=new ImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this))}}
var cache={};function LoadingImage(img){this.img=img}
LoadingImage.prototype=new EventEmitter();LoadingImage.prototype.check=function(){var cached=cache[this.img.src];if(cached){this.useCached(cached);return}
cache[this.img.src]=this;if(this.img.complete&&this.img.naturalWidth!==undefined){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return}
var proxyImage=this.proxyImage=new Image();eventie.bind(proxyImage,'load',this);eventie.bind(proxyImage,'error',this);proxyImage.src=this.img.src};LoadingImage.prototype.useCached=function(cached){if(cached.isConfirmed){this.confirm(cached.isLoaded,'cached was confirmed')}else{var _this=this;cached.on('confirm',function(image){_this.confirm(image.isLoaded,'cache emitted confirmed');return!0})}};LoadingImage.prototype.confirm=function(isLoaded,message){this.isConfirmed=!0;this.isLoaded=isLoaded;this.emit('confirm',this,message)};LoadingImage.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event)}};LoadingImage.prototype.onload=function(){this.confirm(!0,'onload');this.unbindProxyEvents()};LoadingImage.prototype.onerror=function(){this.confirm(!1,'onerror');this.unbindProxyEvents()};LoadingImage.prototype.unbindProxyEvents=function(){eventie.unbind(this.proxyImage,'load',this);eventie.unbind(this.proxyImage,'error',this)};return ImagesLoaded}
if(typeof define==='function'&&define.amd){define(['eventEmitter/EventEmitter','eventie/eventie'],defineImagesLoaded)}else{window.imagesLoaded=defineImagesLoaded(window.EventEmitter,window.eventie)}})(window);(function(factory){var registeredInModuleLoader=!1;if(typeof define==='function'&&define.amd){define(factory);registeredInModuleLoader=!0}
if(typeof exports==='object'){module.exports=factory();registeredInModuleLoader=!0}
if(!registeredInModuleLoader){var OldCookies=window.Cookies;var api=window.Cookies=factory();api.noConflict=function(){window.Cookies=OldCookies;return api}}}(function(){function extend(){var i=0;var result={};for(;i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes){result[key]=attributes[key]}}
return result}
function init(converter){function api(key,value,attributes){var result;if(typeof document==='undefined'){return}
if(arguments.length>1){attributes=extend({path:'/'},api.defaults,attributes);if(typeof attributes.expires==='number'){var expires=new Date();expires.setMilliseconds(expires.getMilliseconds()+attributes.expires*864e+5);attributes.expires=expires}
attributes.expires=attributes.expires?attributes.expires.toUTCString():'';try{result=JSON.stringify(value);if(/^[\{\[]/.test(result)){value=result}}catch(e){}
if(!converter.write){value=encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)}else{value=converter.write(value,key)}
key=encodeURIComponent(String(key));key=key.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);key=key.replace(/[\(\)]/g,escape);var stringifiedAttributes='';for(var attributeName in attributes){if(!attributes[attributeName]){continue}
stringifiedAttributes+='; '+attributeName;if(attributes[attributeName]===!0){continue}
stringifiedAttributes+='='+attributes[attributeName]}
return(document.cookie=key+'='+value+stringifiedAttributes)}
if(!key){result={}}
var cookies=document.cookie?document.cookie.split('; '):[];var rdecode=/(%[0-9A-Z]{2})+/g;var i=0;for(;i<cookies.length;i++){var parts=cookies[i].split('=');var cookie=parts.slice(1).join('=');if(!this.json&&cookie.charAt(0)==='"'){cookie=cookie.slice(1,-1)}
try{var name=parts[0].replace(rdecode,decodeURIComponent);cookie=converter.read?converter.read(cookie,name):converter(cookie,name)||cookie.replace(rdecode,decodeURIComponent);if(this.json){try{cookie=JSON.parse(cookie)}catch(e){}}
if(key===name){result=cookie;break}
if(!key){result[name]=cookie}}catch(e){}}
return result}
api.set=api;api.get=function(key){return api.call(api,key)};api.getJSON=function(){return api.apply({json:!0},[].slice.call(arguments))};api.defaults={};api.remove=function(key,attributes){api(key,'',extend(attributes,{expires:-1}))};api.withConverter=init;return api}
return init(function(){})}));!function(e,n,t){function r(e,n){return typeof e===n}function o(){var e,n,t,o,i,s,a;for(var l in C)if(C.hasOwnProperty(l)){if(e=[],n=C[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(o=r(n.fn,"function")?n.fn():n.fn,i=0;i<e.length;i++)s=e[i],a=s.split("."),1===a.length?Modernizr[a[0]]=o:(!Modernizr[a[0]]||Modernizr[a[0]]instanceof Boolean||(Modernizr[a[0]]=new Boolean(Modernizr[a[0]])),Modernizr[a[0]][a[1]]=o),h.push((o?"":"no-")+a.join("-"))}}function i(e){var n=_.className,t=Modernizr._config.classPrefix||"";if(w&&(n=n.baseVal),Modernizr._config.enableJSClass){var r=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(r,"$1"+t+"js$2")}Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),w?_.className.baseVal=n:_.className=n)}function s(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,"")}function a(e,n){return function(){return e.apply(n,arguments)}}function l(e,n,t){var o;for(var i in e)if(e[i]in n)return t===!1?e[i]:(o=n[e[i]],r(o,"function")?a(o,t||n):o);return!1}function f(e,n){return!!~(""+e).indexOf(n)}function u(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):w?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function p(e){return e.replace(/([A-Z])/g,function(e,n){return"-"+n.toLowerCase()}).replace(/^ms-/,"-ms-")}function c(n,t,r){var o;if("getComputedStyle"in e){o=getComputedStyle.call(e,n,t);var i=e.console;if(null!==o)r&&(o=o.getPropertyValue(r));else if(i){var s=i.error?"error":"log";i[s].call(i,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else o=!t&&n.currentStyle&&n.currentStyle[r];return o}function d(){var e=n.body;return e||(e=u(w?"svg":"body"),e.fake=!0),e}function m(e,t,r,o){var i,s,a,l,f="modernizr",p=u("div"),c=d();if(parseInt(r,10))for(;r--;)a=u("div"),a.id=o?o[r]:f+(r+1),p.appendChild(a);return i=u("style"),i.type="text/css",i.id="s"+f,(c.fake?c:p).appendChild(i),c.appendChild(p),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(n.createTextNode(e)),p.id=f,c.fake&&(c.style.background="",c.style.overflow="hidden",l=_.style.overflow,_.style.overflow="hidden",_.appendChild(c)),s=t(p,e),c.fake?(c.parentNode.removeChild(c),_.style.overflow=l,_.offsetHeight):p.parentNode.removeChild(p),!!s}function v(n,r){var o=n.length;if("CSS"in e&&"supports"in e.CSS){for(;o--;)if(e.CSS.supports(p(n[o]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var i=[];o--;)i.push("("+p(n[o])+":"+r+")");return i=i.join(" or "),m("@supports ("+i+") { #modernizr { position: absolute; } }",function(e){return"absolute"==c(e,null,"position")})}return t}function y(e,n,o,i){function a(){p&&(delete P.style,delete P.modElem)}if(i=r(i,"undefined")?!1:i,!r(o,"undefined")){var l=v(e,o);if(!r(l,"undefined"))return l}for(var p,c,d,m,y,g=["modernizr","tspan","samp"];!P.style&&g.length;)p=!0,P.modElem=u(g.shift()),P.style=P.modElem.style;for(d=e.length,c=0;d>c;c++)if(m=e[c],y=P.style[m],f(m,"-")&&(m=s(m)),P.style[m]!==t){if(i||r(o,"undefined"))return a(),"pfx"==n?m:!0;try{P.style[m]=o}catch(h){}if(P.style[m]!=y)return a(),"pfx"==n?m:!0}return a(),!1}function g(e,n,t,o,i){var s=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+E.join(s+" ")+s).split(" ");return r(n,"string")||r(n,"undefined")?y(a,n,o,i):(a=(e+" "+b.join(s+" ")+s).split(" "),l(a,n,t))}var h=[],C=[],S={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){C.push({name:e,fn:n,options:t})},addAsyncTest:function(e){C.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=S,Modernizr=new Modernizr;var _=n.documentElement,w="svg"===_.nodeName.toLowerCase(),x="Moz O ms Webkit",b=S._config.usePrefixes?x.toLowerCase().split(" "):[];S._domPrefixes=b;var E=S._config.usePrefixes?x.split(" "):[];S._cssomPrefixes=E;var j=function(n){var r,o=prefixes.length,i=e.CSSRule;if("undefined"==typeof i)return t;if(!n)return!1;if(n=n.replace(/^@/,""),r=n.replace(/-/g,"_").toUpperCase()+"_RULE",r in i)return"@"+n;for(var s=0;o>s;s++){var a=prefixes[s],l=a.toUpperCase()+"_"+r;if(l in i)return"@-"+a.toLowerCase()+"-"+n}return!1};S.atRule=j;var z={elem:u("modernizr")};Modernizr._q.push(function(){delete z.elem});var P={style:z.elem.style};Modernizr._q.unshift(function(){delete P.style}),S.testAllProps=g;var N=S.prefixed=function(e,n,t){return 0===e.indexOf("@")?j(e):(-1!=e.indexOf("-")&&(e=s(e)),n?g(e,n,t):g(e,"pfx"))};Modernizr.addTest("objectfit",!!N("objectFit"),{aliases:["object-fit"]}),o(),i(h),delete S.addTest,delete S.addAsyncTest;for(var T=0;T<Modernizr._q.length;T++)Modernizr._q[T]();e.Modernizr=Modernizr}(window,document);(function($){$.fn.autoSizes=function(parameters){log('autoSizes');parameters=parameters||{};var defaults={timeout:1000,class:'autosizes-on',loadingClass:'autosizes-loading'};parameters=$.extend(defaults,parameters);return this.each(function(){var $this=$(this);log('getting image dimensions for:');log($this);if(!$this.hasClass(parameters.class)){var srcset=$this.data('srcset');var src=$this.data('src');$this.prop({srcset:srcset,src:src}).addClass(parameters.class).removeClass(parameters.loadingClass).removeAttr('data-srcset').removeAttr('data-src')}
var width=$this.width();var height=$this.height();log('width is '+$this.width());if(width===0||$this.hasClass('orientation-landscape')&&height>width){log('width is 0, looking for height');if(height>0){log('height is > 0, using that');var height=parseInt($this.height())}else if($this.css('max-height')!="none"){log('height is 0, looking for max-height, which is '+$this.css('max-height'));var height=parseInt($this.css('max-height'))}else{log('defaulting to height: 100');var height=100}
var dimensions=$this.data('dimensions').split('x');var masterWidth=dimensions[0];var masterHeight=dimensions[1];var width=Math.round((height*masterWidth)/masterHeight)}
var width=Math.round(width);$this.prop('sizes',width+'px');return this})}})(jQuery);var rsnBrowser=new Object();rsnBrowser.detect=function(){var ua=window.navigator.userAgent.toLowerCase();var platform=new Object();platform.os=new Object();platform.browser=new Object();if(ua.indexOf("mac os x")!=-1){platform.os.name="osx"}else if(ua.indexOf("windows")!=-1){platform.os.name="windows"}else if(ua.indexOf("linux")!=-1){platform.os.name="linux"}
if(ua.indexOf('webkit')!=-1){platform.browser.engine="webkit"}else if(ua.indexOf('gecko')!=-1){platform.browser.engine="gecko"}else if(ua.indexOf('msie')!=-1){platform.browser.engine="msie"}
var browser=ua.match(/(opera|chrome|safari|firefox|trident|applewebkit)\/?\s*(\.?\d+(\.\d+)*)/i);if(browser){if(browser[1]&&browser[1]=="trident"){platform.browser.name="msie"}else if(browser[1]){platform.browser.name=browser[1]}else{platform.browser.name="unknown"}
if(browser[2]){platform.browser.version=browser[2]}else{platform.browser.version="unknown"}
if(platform.browser.name=="safari")platform.browser.version=ua.match(/version\/?\s*(\.?\d+(\.\d+)*)/i)[1]}
return platform};rsnBrowser.compareVersions=function(v1,v2){var v1parts=v1.split('.');var v2parts=v2.split('.');for(var i=0;i<v1parts.length;++i){if(v2parts.length==i)return!0;if(v1parts[i]==v2parts[i]){continue}else if(v1parts[i]>v2parts[i]){return!0}else{return!1}}
if(v1parts.length!=v2parts.length)return!1;return!0};var lightbox=new Object();var ios=navigator.userAgent.match(/(iphone|ipod|ipad)/i)?!0:!1;lightbox.start=function(){$('.thumbs:not(.group .thumbs)').unbind('click').on('click','.gallery-image-thumb a',function(e){var $this=$(this);if(!$this.hasClass('custom')){e.preventDefault();var $thumbnail=$this.find('img');lightbox.show($thumbnail)}});lightbox.bookmark();function close(e){var $target=$(e.target);if($target.is('.close-overlay')||$target.is('#overlay')||e.which===27||e.which===40){e.preventDefault();$('#overlay').removeClass('show');setTimeout(function(){$('#overlay').remove()},250);history.pushState("",document.title,window.location.pathname+window.location.search)}}
$(document).on('click','#overlay',close);$(document).on('click','#overlay a.next.paging',function(event){lightbox.next('next');event.preventDefault()});$(document).on('click','#overlay a.back.paging',function(event){lightbox.next('back');event.preventDefault()});$('body').keydown(function(e){if(e.which===37){lightbox.next('back')}else if(e.which===39){lightbox.next('next')}else if(e.which===27||e.which===40){close(e)}});$(window).resize(function(){lightbox.resize();$('#overlay .image').show()})};lightbox.bookmark=function(){if(window.location.hash){var find=window.location.hash.replace('#','');$('body').find('img[data-filename^="'+find+'"]').closest('a').each(function(){$(this).click()})}};lightbox.next=function(direction){if($('#overlay img').data('filename')){var filename=$('#overlay img').data('filename');var $current=$('img[data-filename="'+filename+'"]').not('#overlay img').closest('li');var $new=(direction==="back"?$current.prevAll('.gallery-image-thumb:first'):$current.nextAll('.gallery-image-thumb:first'));if($new.length===0){return!1}
var $thumbnail=$new.find('img');var title=$new.children('h4').text();var description=$new.children('div').html();lightbox.show($thumbnail,title,description)}
return!1};lightbox.show=function($thumbnail){if($('#overlay').length<1){$('<div id="overlay"></div>').appendTo('body');setTimeout(function(){$('#overlay').addClass('show')},1)}
var $overlay=$('#overlay');$overlay.html('<div class="image"></div><a class="paging back" href="#back"><i class="fal fa-chevron-left"></i></a><a class="paging next" href="#next"><i class="fal fa-chevron-right"></i></a><a class="close-overlay" href="#close"><i class="fal fa-times"></i></a>');var $listItem=$thumbnail.closest('li');var $image=$thumbnail.clone().removeAttr('style');var imageId=$thumbnail.closest('a').attr('id').replace(/^thumb\-/,'image-');$image.prop({id:imageId});var source=$image.data('source');$overlay.children('.image').addClass('source-'+source);var dimensions=$image.data('dimensions').split('x');$overlay.find('.image').append($image);setTimeout(function(){lightbox.resize();$overlay.children('div').addClass('show')},100);log('filename: '+$image.data('filename'));var filename=$image.data('filename').toString().replace(/\..+$/,'');window.location.hash=filename;lightbox.hidePaging(filename);rsn.imageTagalongs();var title=$listItem.find('h4').html();var $descriptionElement=$listItem.find('.description');if($descriptionElement.hasClass('description-paypal'))$('#overlay').addClass('overlay--paypal');var description=$descriptionElement.html();if(title||description){log('Title or description found');$('#overlay > div').append('<div class="info show"></div>');if(title)$('#overlay .info').append('<h4>'+title+'</h4>');if(description)$('#overlay .info').append('<p>'+description+'</p>')}else{log('Title or description NOT found')}
setTimeout(function(){$listItem.css({outline:"2px solid $f00"});$('.preloaded').remove();var sizes=$image.attr('sizes');var $nextImage=$listItem.next().find('a img').clone().removeAttr('id style width height class data-sizes data-filename').addClass('preloaded').prop({sizes:sizes});$('body').append($nextImage)},300)};lightbox.resize=function(){var $frame=$('#overlay .image');var $image=$frame.children('img');var $window=$(window);var windowWidth=$window.width();var windowHeight=$window.height();if($image.data('dimensions')){var dimensions=$image.data('dimensions').split('x');var originalImageWidth=dimensions[0];var originalImageHeight=dimensions[1]}
var overlayVerticalPadding=parseInt($frame.css('padding-top'))+parseInt($frame.css('padding-bottom'));var overlayHorizontalPadding=parseInt($frame.css('padding-left'))+parseInt($frame.css('padding-right'));if(originalImageHeight*1+overlayVerticalPadding*1>windowHeight){log('Resizing to fit vertically');log('originalImageHeight: '+originalImageHeight);log('overlayVerticalPadding: '+overlayVerticalPadding);log('windowHeight: '+windowHeight);var newImageHeight=windowHeight-overlayVerticalPadding;var ratio=newImageHeight/originalImageHeight;var newImageWidth=originalImageWidth*ratio}else{log('image is small enough to fit on screen');var newImageHeight=originalImageHeight;var newImageWidth=originalImageWidth}
if(newImageWidth*1+overlayHorizontalPadding*1>windowWidth){log('Resizing to fit horizontal');var newImageWidth=windowWidth-overlayHorizontalPadding;var ratio=newImageWidth/originalImageWidth;var newImageHeight=originalImageHeight*ratio}
var overlayHeight=newImageHeight*1+overlayVerticalPadding*1;var marginTop=(windowHeight-overlayHeight)/2;var overlayWidth=newImageWidth*1+overlayHorizontalPadding*1;var marginLeft=(windowWidth-overlayWidth)/2;$('#overlay .image > img:not(.blocker)').css({'width':newImageWidth+'px','height':newImageHeight+'px'});$('#overlay .image').css({'margin-left':marginLeft+'px','margin-top':marginTop+'px'})};lightbox.hidePaging=function(){if($('#overlay img').data('filename')){var filename=$('#overlay img').data('filename');var $current=$('img[data-filename="'+filename+'"]').not('#overlay img').closest('li');if($current.next().length===0){$('#overlay a.next').addClass('invisible')}else{$('#overlay a.next').removeClass('invisible')}
if($current.prev().length===0){$('#overlay a.back').addClass('invisible')}else{$('#overlay a.back').removeClass('invisible')}}};var rsn=new Object();rsn.usingDownloadBlocker=!1;rsn.usingShareButton=!1;jQuery.fn.extend({ensureLoad:function(handler){return this.each(function(){if(this.complete){handler.call(this)}else{$(this).on('load',handler)}})}});function log(message){if(typeof develop!="undefined"&&window.console&&window.console.log){console.log(message)}}
rsn.findFullSizeImages=function(){return $('ul.images img, #overlay img, #sidebar img').not('.body img, .html img, .blocker, form img, footer img, .thumbs img')};rsn.browserDetect=function(){platform=rsnBrowser.detect();$('body').addClass(platform.browser.engine);log(platform);if(navigator.userAgent.match(/like Mac OS X/i)){$('body').addClass('ios')}};rsn.ios=function(){};rsn.email=function(){$('a[href^="mailto:"]').click(function(e){e.preventDefault();window.location.href=$(this).attr('href')})};rsn.links=function(){$('#content a').each(function(){var href=$(this).attr('href');var domain=document.domain.replace(/^www\./,'');if(typeof(href)!="undefined"&&!href.match('http://'+domain)&&!href.match('http://www.'+domain)&&!href.match(/^\//)&&!href.match(/^\#/)){$(this).attr('target','_blank').attr('rel','external')}});$(document).on('click','a[href="#top"]',function(){window.scrollTo(0,0);return!1})};rsn.externalNavLinks=function(){$('nav a').each(function(){var href=$(this).attr('href');var domain=document.domain.replace(/^www\./,'');if(typeof(href)!="undefined"&&!href.match('http://'+domain)&&!href.match('http://www.'+domain)&&!href.match(/^\//)&&!href.match(/^\#/)){$(this).attr('target','_blank').attr('rel','external')}})};(function($){$.fn.getImageSizeWhileLoading=function(parameters){parameters=parameters||{};var defaults={findDimension:'width',assignTo:'self'};parameters=$.extend(defaults,parameters);return this.each(function(){$(this).find('img').each(function(){var $image=$(this);var $target=(parameters.assignTo==="self"?$image:$image.closest(parameters.assignTo));if($image.data('dimensions')&&$image.data('dimensions').match(/^\d+x\d+$/)){var aspectRatio=$image.data('dimensions').split('x');var aspectRatio=aspectRatio[0]/aspectRatio[1]}else{var aspectRatio=$image.attr('width')/$image.attr('height')}
if(parameters.findDimension==="width"){var newHeight=parseInt($image.css('height'));var newWidth=Math.round(newHeight*aspectRatio)}else{var newWidth=parseInt($image.css('width'));var newHeight=Math.round(newWidth/aspectRatio)}
$target.css({width:newWidth+'px',height:newHeight+'px'})})})}})(jQuery);rsn.home=new Object();rsn.home.setup=function(){var $firstImage=$('#billboard > .img:first-child');var src=$firstImage[0].currentSrc;if(typeof src=="undefined"||src.length<1)var src=$firstImage.attr('src');log('loading '+src);var img=new Image;img.onload=function(){rsn.home.slideshowHeight($('#billboard > .img:first-child'));setTimeout(function(){$('#billboard').removeClass('loading');if($('#billboard > .img').length>1)rsn.home.slideshow()},1)};img.src=src};rsn.home.slideshowHeight=function($slide){if($('body').hasClass('nobleed')){var newHeight=$slide.height();$('#billboard').css('height',newHeight+'px');log('Resizing billboard to match next slide')}};rsn.home.slideshow=function(){log('starting slideshow');$('#billboard > .img:first-child').addClass('active');var slideshowDelay=(typeof window.slideshowDelay!="undefined"?window.slideshowDelay*1000:4500);var slideshowTimer=setInterval(function(){nextSlide(1)},slideshowDelay);$('#billboard').click(function(){clearInterval(slideshowTimer);slideshowTimer=setInterval(function(){nextSlide(1)},slideshowDelay);nextSlide(1)});$('body').keydown(function(e){if(e.which===39){clearInterval(slideshowTimer);slideshowTimer=setInterval(function(){nextSlide(1)},slideshowDelay);nextSlide(1)}else if(e.which===37){clearInterval(slideshowTimer);slideshowTimer=setInterval(function(){nextSlide(1)},slideshowDelay);nextSlide(-1)}});function nextSlide(next){var $last=$('#billboard .active');if(next>0){var $next=($last.next('.img').length>0?$last.next():$('#billboard > .img:first-child'))}else{var $next=($last.prev('.img').length>0?$last.prev():$('#billboard > .img:last-child'))}
rsn.home.slideshowHeight($next);$next.addClass('active');$last.removeClass('active')}};rsn.grid=function(){if($('.centered .grid .thumbs > li, div.archive:not(.list) li').length>0){var size=parseInt($('.grid .thumbs > li:first-child').width());$('.grid .thumbs > li').css('height',size+'px');$('.center .archive:not(.grid) .thumbs li:nth-child(6n+1)').addClass('clear')}
$('#content .grid img, #content .archive img').each(function(){var $this=$(this);$this.ensureLoad(function(){$this.addClass('loaded')})})};rsn.carousel=new Object();rsn.carousel.resize=function(){if(typeof(timeout)!="undefined")clearTimeout(timeout);timeout=setTimeout(function(){var spaceHogs=['.layout-header-wide header','.layout-header-wide footer','.centered header','.centered #content > h2','.centered footer','#content'];var usedVerticalSpace=0;$.each(spaceHogs,function(index,value){if($(value).length>0){var currentElementVerticalSpace=0;if(value!="#content")currentElementVerticalSpace+=$(value).height();currentElementVerticalSpace+=parseInt($(value).css('padding-top'));currentElementVerticalSpace+=parseInt($(value).css('padding-bottom'));if(value!="#content"&&$('.layout-header-wide').length<1)currentElementVerticalSpace+=parseInt($(value).css('margin-top'));currentElementVerticalSpace+=parseInt($(value).css('margin-bottom'));usedVerticalSpace+=currentElementVerticalSpace;log(value+": "+currentElementVerticalSpace)}});var imagePaddingTop=parseInt($('div.carousel .images > li:first-child').css('padding-top'));var imagePaddingBottom=parseInt($('div.carousel .images > li:first-child').css('padding-bottom'));var imagePadding=imagePaddingTop+imagePaddingBottom;var contentHeight=$(window).height()-usedVerticalSpace-imagePadding;log("imagePadding: "+imagePadding);log("contentHeight: "+contentHeight);var thumbHeight=$('.carousel .thumbs:visible').outerHeight();if(thumbHeight==null)var thumbHeight=0;var stageHeight=contentHeight-thumbHeight;$('.carousel').css({'height':contentHeight+'px'});$('ul.images').css({'height':stageHeight+'px','line-height':stageHeight+'px'});log('windowHeight: '+$(window).height());log('usedVerticalSpace: '+usedVerticalSpace);log('contentHeight: '+contentHeight);log('thumbHeight: '+thumbHeight);log('stageHeight: '+stageHeight)},50)};rsn.carousel.bookmark=function(){if(window.location.hash){var find=window.location.hash.replace('#','');$('.thumbs').find('img[data-filename^="'+find+'"]').closest('a').each(function(){$(this).click()});return!0}else{return!1}};rsn.carousel.multi=function(){rsn.carousel.resize();$(window).resize(rsn.carousel.resize);$('ul.images').after('<a class="paging back" href="#back">Back</a><a class="paging next" href="#next">Next</a>');var selectedThumbClass="carousel-selected-thumb";var selectedImageClass="carousel-selected-image";var $images=$('.carousel .images');function selectSlide(event){if(event)event.preventDefault();var $thumb=$(this);var $thumbImage=$thumb.find('img');var $thumbListItem=$thumb.closest('li');$thumbListItem.siblings().removeClass(selectedThumbClass);$thumbListItem.addClass(selectedThumbClass);var imageID=$thumb.attr('id').replace('thumb-','image-');var $imageListItem=$('#'+imageID).closest('li');$imageListItem.siblings().removeClass(selectedImageClass);$imageListItem.addClass(selectedImageClass);var $thumbs=$('.thumbs');$thumbs.stop();setTimeout(function(){var $selectedThumb=$thumbs.find('.'+selectedThumbClass);var position=$selectedThumb.position();if(position){var scroll=$thumbs.scrollLeft();var thumbWidth=$selectedThumb.width();var windowWidth=$thumbs.width();var left=(position.left+scroll)-(windowWidth/2)+thumbWidth/2;$thumbs.animate({scrollLeft:left},500)}},10)}
$('.thumbs a').click(selectSlide);$('.paging.next').click(function(event){event.preventDefault();$('.'+selectedThumbClass).next().children('a').each(selectSlide)});$('.paging.back').click(function(event){event.preventDefault();$('.'+selectedThumbClass).prev().children('a').each(selectSlide)});$('body').keydown(function(event){if(event.which==39){event.preventDefault();$('.'+selectedThumbClass).next().children('a').each(selectSlide)}else if(event.which==37){event.preventDefault();$('.'+selectedThumbClass).prev().children('a').each(selectSlide)}});$('.thumbs li:first-child > a').each(selectSlide);setTimeout(function(){$('.carousel').removeClass('loading')},50)};rsn.carousel.centered=function(){rsn.carousel.resize();$(window).resize(rsn.carousel.resize);$('ul.images').after('<a class="paging back" href="#back">Back</a><a class="paging next" href="#next">Next</a>');var selectedThumbClass="carousel-selected-thumb";var selectedImageClass="carousel-selected-image";var $images=$('.carousel .images');function selectSlide(){var $thumb=$(this);var $thumbListItem=$thumb.closest('li');$thumbListItem.siblings().removeClass(selectedThumbClass);$thumbListItem.addClass(selectedThumbClass);var imageID=$thumb.attr('id').replace('thumb-','image-');var $imageListItem=$('#'+imageID).closest('li');$imageListItem.siblings().removeClass(selectedImageClass);$imageListItem.addClass(selectedImageClass);var $thumbs=$('.thumbs');$thumbs.stop();setTimeout(function(){var $selectedThumb=$thumbs.find('.'+selectedThumbClass);var position=$selectedThumb.position();if(position){var scroll=$thumbs.scrollLeft();var thumbWidth=$selectedThumb.width();var windowWidth=$thumbs.width();var left=(position.left+scroll)-(windowWidth/2)+thumbWidth/2;$thumbs.animate({scrollLeft:left},500)}},10)}
$('.thumbs li:first-child > a').each(selectSlide);$('.thumbs a').click(selectSlide);$('.paging.next').click(function(event){event.preventDefault();$('.'+selectedThumbClass).next().children('a').each(selectSlide)});$('.paging.back').click(function(event){event.preventDefault();$('.'+selectedThumbClass).prev().children('a').each(selectSlide)});$('body').keydown(function(event){if(event.which==39){event.preventDefault();$('.'+selectedThumbClass).next().children('a').each(selectSlide)}else if(event.which==37){event.preventDefault();$('.'+selectedThumbClass).prev().children('a').each(selectSlide)}});setTimeout(function(){$('.carousel').removeClass('loading')},50)};rsn.resetPageStyles=function(){log('=== resetPageStyles ===')
if($('.sidescroll').length>0){var $selector=$('.sidescroll .gallery-image');var assignedHeight=parseInt($selector.css('max-height'));log('assignedHeight: '+assignedHeight);$selector.data({'max-height':assignedHeight})}else if($('.tile').length>0){rsn.tiles.layout(!0)}else if($('.blocks').length>0){rsn.blocks.makeCollage(!0)}};rsn.sideScroll=new Object();rsn.sideScroll.space=function(){var windowHeight=$('html')[0].clientHeight;var itemMarginTop=parseInt($('.images > li:first-child').css('margin-top'));var itemMarginBottom=parseInt($('.images > li:first-child').css('margin-bottom'));var usedSpace=itemMarginTop+itemMarginBottom;var stageHeight=windowHeight;if($('.layout-header-wide').length>0){var headerHeight=$('header').height();var footerHeight=$('footer:visible').outerHeight();var contentPadding=parseInt($('#content').css('padding-top'))+parseInt($('#content').css('padding-bottom'));usedSpace+=headerHeight+footerHeight+contentPadding;stageHeight-=(headerHeight+footerHeight+contentPadding)}
log('headerHeight: '+headerHeight);log('footerHeight: '+footerHeight);log('contentPadding: '+contentPadding);log('usedSpace: '+usedSpace);return{windowHeight:windowHeight,usedSpace:usedSpace,stageHeight:stageHeight,maxImageHeight:windowHeight-usedSpace}};rsn.sideScroll.resize=function(){log('resizing sidescroll layout');var space=rsn.sideScroll.space();log(space);if(!$('.sidescroll li').data('max-height'))rsn.resetPageStyles();var assignedHeight=$('.sidescroll .gallery-image').data('max-height');if(space.maxImageHeight>assignedHeight){var imageHeight=assignedHeight;log('Assigned image height is smaller than max possible.')}else{var imageHeight=space.maxImageHeight;log('Assigned image height is larger than available space.')}
$('.sidescroll .images').css({'line-height':space.stageHeight+'px'});$('.sidescroll img').css({'max-height':imageHeight+'px'});$('.sidescroll').removeClass('loading')};rsn.uniformHeight=function(commonHeight){if(typeof commonHeight=="undefined")var commonHeight=675;if($('.centered .sidescroll').length>0){$('.centered .sidescroll img').css({'max-height':commonHeight+'px'})}else{rsn.uniformHeight.maxHeight=function(){var windowHeight=parseInt($('html')[0].clientHeight);var marginTop=parseInt($('.images > li:first-child').css('margin-top'));var marginBottom=parseInt($('.images > li:first-child').css('margin-bottom'));if($('.layout-header-wide').length>0){var limit=rsn.sideScroll.space().maxImageHeight}else{var limit=windowHeight-marginTop-marginBottom}
if(limit>commonHeight){var maxHeight=commonHeight}else{var maxHeight=limit}
$('.sidescroll img').css({'max-height':maxHeight+'px','max-width':'none'})};$(document).ready(function(){$('.sidescroll li').css({'max-width':'none'});rsn.uniformHeight.maxHeight();$(window).resize(rsn.uniformHeight.maxHeight)})}};rsn.sideScroll.sidebar=function(){rsn.sideScroll.resize();if(!$('body').hasClass('ios'))$(window).resize(rsn.sideScroll.resize);$('#content').css('visibility','visible');if($('.sidescroll').length>0){$(window).on('mousewheel',function(event){if($('.sidescroll').is(':visible')){log(event.deltaX,event.deltaY,event.deltaFactor);if(event.deltaY!=0){var scrollLeft=$(this).scrollLeft();$(this).scrollLeft(scrollLeft-event.deltaY*event.deltaFactor)}}});$('.left .images li').hover(function(){$(this).addClass('hover')},function(){$(this).removeClass('hover')});$(document).keydown(function(e){var sidebarWidth=parseInt($('header').css('width'));var windowWidth=parseInt($(window).width());var contentWidth=windowWidth-sidebarWidth;var padding=20;var horizontalSlideSpeed=(typeof window.horizontalSlideSpeed!="undefined"?window.horizontalSlideSpeed:750);if(e.which==37){log('left');$('html, body').stop();var scrollLeft=$(window).scrollLeft();$($('.images > li').get().reverse()).each(function(){var offset=parseInt($(this).offset().left-scrollLeft);var rightEdge=offset+parseInt($(this).width());var limit=sidebarWidth+contentWidth/2;if(rightEdge<limit-padding){var imageWidth=parseInt($(this).width());var scrollTo=parseInt(scrollLeft+offset-sidebarWidth-contentWidth/2+imageWidth/2);log(scrollTo);$('html, body').animate({scrollLeft:scrollTo},horizontalSlideSpeed);return!1}});return!1}else if(e.which==39){$('html, body').stop();var scrollLeft=$(window).scrollLeft();$('.images > li').each(function(){var offset=parseInt($(this).offset().left-scrollLeft);var limit=sidebarWidth+contentWidth/2;if(offset>limit+padding){var imageWidth=parseInt($(this).width());var scrollTo=parseInt(scrollLeft+offset-sidebarWidth-contentWidth/2+imageWidth/2);log(scrollTo);$('html, body').animate({scrollLeft:scrollTo},horizontalSlideSpeed);return!1}});return!1}});$(document).on('click','.images .image > img',function(e){e.preventDefault();var e=$.Event('keydown');e.which=39;$(document).trigger(e)});var $sidebar=$('header');var $footer=$('footer');var sidebarWidth=$sidebar.width();$('.left.ios:has(.sidescroll)').swipe({swipe:function(event,direction,distance,duration,fingerCount,fingerData){if(direction=="left"){$sidebar.css({left:-sidebarWidth+'px'});$footer.css({left:-sidebarWidth+'px'})}else if(direction=="right"){var zoomLevel=document.height/window.innerHeight;$sidebar.css({left:0});$footer.css({left:0})}},threshold:10,allowPageScroll:'horizontal',cancelThreshold:10000})}};rsn.sideScroll.headerWide=function(){$('header').css('position','fixed');$('footer').css('position','fixed');var padding=parseInt($('.images > li:first-child').css('margin-right'))*2;$('#content').css({'padding-left':padding+"px"});rsn.sideScroll.resize();if(!$('body').hasClass('ios')){$(window).resize(rsn.sideScroll.resize)}
$('#content').css('visibility','visible');$(window).on('mousewheel',function(event){log(event.deltaX,event.deltaY,event.deltaFactor);if(event.deltaY!=0){event.preventDefault();var scrollLeft=$(this).scrollLeft();$(this).scrollLeft(scrollLeft-event.deltaY*event.deltaFactor)}});$('.layout-header-wide .images li').hover(function(){$(this).addClass('hover')},function(){$(this).removeClass('hover')});$(document).keydown(function(e){var contentWidth=parseInt($(window).width());var horizontalSlideSpeed=(typeof window.horizontalSlideSpeed!="undefined"?window.horizontalSlideSpeed:750);if(e.which===37){e.preventDefault();$('html, body').stop();var scrollLeft=$(window).scrollLeft();$($('.images > li').get().reverse()).each(function(){var left=parseInt($(this).offset().left);var offset=left-scrollLeft;var limit=contentWidth/2;var imageWidth=parseInt($(this).width());var rightEdge=offset+imageWidth;if(rightEdge<limit){var margin=(contentWidth-imageWidth)/2;var scrollTo=left-margin;$('html, body').animate({scrollLeft:scrollTo},horizontalSlideSpeed);return!1}})}else if(e.which===39){e.preventDefault();$('html, body').stop();var scrollLeft=$(window).scrollLeft();$('.images > li').each(function(){var left=parseInt($(this).offset().left);var offset=left-scrollLeft;var limit=contentWidth/2;if(offset>limit){var imageWidth=parseInt($(this).width());var margin=(contentWidth-imageWidth)/2;var scrollTo=left-margin;$('html, body').animate({scrollLeft:scrollTo},horizontalSlideSpeed);return!1}})}});$(document).on('click','.images .image > img',function(e){e.preventDefault();var e=$.Event('keydown');e.which=39;$(document).trigger(e)})};rsn.sideScroll.header=function(){var scrollModifier=(navigator.appVersion.indexOf('Mac')!=-1?25:70);$('.sidescroll .images').mousewheel(function(event){if(event.deltaY!=0){event.preventDefault();$(this)[0].scrollLeft-=event.deltaY*event.deltaFactor}});$('.sidescroll').removeClass('loading');$('.sidescroll .images li').hover(function(){$(this).addClass('hover')},function(){$(this).removeClass('hover')})};rsn.tiles=new Object();rsn.tiles.setup=function(){var $container=$('.tile > .thumbs');rsn.tiles.layout(!1);var resizeTimer=null;$(window).bind('resize',function(){$container.css({opacity:0,visibility:'hidden'});if(resizeTimer)clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){rsn.tiles.layout(!1)},200)});$container.find('img').ensureLoad(function(){$(this).addClass('loaded')});if(!$('div.tile').hasClass('collage'))lightbox.start('div.tile');$(window).on('load',function(){rsn.tiles.layout(!1);setTimeout(function(){rsn.tiles.layout(!1)},1000);$('.tile.flickr').addClass('loaded')})};rsn.tiles.layout=function(reset){log('rsn.tiles.layout:'+reset);var $container=$('.tile > .thumbs');var $styleGuide=$container.children('.gallery-image-thumb:first').children('a');if(typeof(timeout)!="undefined")clearTimeout(timeout);timeout=setTimeout(function(){if(!$styleGuide.data('targetWidth')||reset){$styleGuide.data({'targetWidth':parseInt($styleGuide.css('width'))})}
var maxWidth=$styleGuide.data('targetWidth');var margin=parseInt($styleGuide.css('margin-right'));var maxColumn=maxWidth+margin;var textWidth=maxWidth*2+margin;if(pageLayout==="left"){}else if(pageLayout==="header-wide"){$container.css({paddingTop:margin,paddingLeft:margin})}
log('calculating tiles layout');var win=(navigator.appVersion.indexOf("Win")!=-1?!0:!1);var safetyPadding=(win?5:0);var containerWidth=$container.width();var columns=containerWidth/maxColumn;var newColumnCount=Math.ceil(columns);log(newColumnCount+' columns');var newColumnWidth=Math.floor((containerWidth/newColumnCount))-safetyPadding;var newImageWidth=newColumnWidth-margin;var newTextWidth=newImageWidth*2+margin;var masonryOptions={itemSelector:'li',transitionDuration:'0s',isResizeBound:!1,columnWidth:newColumnWidth,percentPosition:!0};log('========');log('containerWidth: '+containerWidth);log('margin: '+margin);log('newColumnCount: '+newColumnCount);log('newColumnWidth: '+newColumnWidth);log('newImageWidth: '+newImageWidth);log('========');$container.find('a').css({width:newImageWidth+'px'});$container.find('a.feature').css({width:newImageWidth*2+margin+'px'});$container.find('.gallery-text-thumb').css({width:newTextWidth+'px'});$container.getImageSizeWhileLoading({findDimension:'height',assignTo:'a'});$container.masonry(masonryOptions);$container.addClass('loaded').css({opacity:1,visibility:'visible'});if($.fn.autoSizes)$('img[data-sizes="auto"]').autoSizes()},1)};rsn.parseImageSrc=function(src){if(src.match(/\/\d+_(thumb|image)_\d+\..+$/))return!1;var parts=src.match(/^(https?:\/\/)(.+\..+\.com)\/(.+)\/(.+)-(\d+)(-thumb|-700)?\.(.+)$/i);if(parts===null)return!1;var parts={protocol:parts[1],domain:parts[2],folder:parts[3],name:parts[4],id:parts[5],suffix:parts[6],extension:parts[7]};return parts};rsn.buildImageSrc=function(parts){return parts.protocol+parts.domain+"/"+parts.folder+"/"+parts.name+"-"+parts.id+parts.suffix+"."+parts.extension};rsn.isHighDensity=function(){return((window.matchMedia&&(window.matchMedia('only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)').matches||window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)').matches))||(window.devicePixelRatio&&window.devicePixelRatio>1.3))};rsn.correctResolution=function(){ppiHighRes=1.5;ppiStandard=1;var ppi=(rsn.isHighDensity()?ppiHighRes:ppiStandard);$('img').each(function(){var $this=$(this);var src=$this.data('src');var elementHeight=parseInt($this.height());var parts=rsn.parseImageSrc(src);if(elementHeight<=350/ppi){parts.suffix="-thumb"}else if(elementHeight<=700/ppi){parts.suffix="-700"}else{parts.suffix=""}
var newSrc=rsn.buildImageSrc(parts);$this.prop({src:newSrc})})};jQuery.fn.cleanWhitespace=function(){textNodes=this.contents().filter(function(){return(this.nodeType==3&&!/\S/.test(this.nodeValue))}).remove();return this}
rsn.blocks=new Object();rsn.blocks.makeCollage=function(reset){var result=[];$('.blocks > .thumbs').each(function(){var $wrapper=$(this);var $styleGuide=$wrapper.children('li:first-child').children('a');if(!$styleGuide.data('targetHeight')||reset)$styleGuide.data({'targetHeight':parseInt($styleGuide.css('height'))});var targetHeight=$styleGuide.data('targetHeight');var padding=parseInt($styleGuide.css('margin-right'));if(pageLayout==="left"){$wrapper.css({paddingTop:padding,paddingLeft:padding})}else if(pageLayout==="header-wide"){$wrapper.css({paddingTop:padding,paddingLeft:padding,paddingRight:padding})}else if(pageLayout==="centered"){$wrapper.css({paddingTop:padding,paddingBottom:padding})}
$wrapper.find('img').each(function(){var $this=$(this);var dimensions=$this.data('dimensions');if(dimensions){var dimensions=dimensions.split('x');$this.prop({width:dimensions[0],height:dimensions[1]})}});log('makeCollage');log('targetHeight: '+targetHeight);$wrapper.cleanWhitespace().collagePlus({targetHeight:targetHeight,padding:padding,allowPartialLastRow:!0,images:$wrapper.children('li').children('a')}).css({opacity:1,visibility:'visible'});result.push($wrapper)});return result};rsn.blocks.setup=function(){var $wrapper=rsn.blocks.makeCollage(!1);$.each($wrapper,function(index,value){var resizeTimer=null;$(window).bind('resize',function(){$(value).css({opacity:0,visibility:'hidden'});if(resizeTimer)clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){rsn.blocks.makeCollage(!1)},200)})});if(!$('div.blocks').hasClass('collage'))lightbox.start('div.blocks')};rsn.markup=function(){};rsn.computedStyles=function(){if($('#page-index.centered.bleed footer').length>0){var width=parseInt($('#content').width());var outerWidth=parseInt($('#content').outerWidth());var padding=parseInt((outerWidth-width)/2);var marginLeft=outerWidth/-2;$('.bleed footer').css({'width':width+'px','margin-left':marginLeft+'px','padding-left':padding+'px','padding-right':padding+'px'});$('.bleed footer').addClass('show')}
var footerColor=$('footer p').css('color');$('.credit path').css({fill:footerColor});if($('body.left').length>0){var sidebarWidth=parseInt($('header').css('width'));var padding=parseInt($('footer').css('padding-left'))+parseInt($('footer').css('padding-right'));var footerWidth=sidebarWidth-padding;$('footer').css({width:footerWidth+'px'}).addClass('show')}
if($('body.left').length>0){if(!$('nav').is(':visible'))$('nav').show();$('header h1 a').data({top:parseInt($('header h1 a').position().top)});$('nav').data({top:parseInt($('nav').position().top)});$('footer').data({height:parseInt($('footer').height())});rsn.computedStyles.prototype.responsiveSidebar();$(window).resize(rsn.computedStyles.prototype.responsiveSidebar)}
if($('body.left').length>0&&$('.textpage').length>0||$('.layout-header-wide').length>0&&$('.textpage').length>0){function responsiveTextPage(){var width=$('.textpage').width();if(width<700){$('.text-left').addClass('text-centered').addClass('text-left-disabled').removeClass('text-left');$('.text-right').addClass('text-centered').addClass('text-right-disabled').removeClass('text-right')}else{$('.text-left-disabled').removeClass('text-centered').removeClass('text-left-disabled').addClass('text-left');$('.text-right-disabled').removeClass('text-centered').removeClass('text-right-disabled').addClass('text-right')}}
responsiveTextPage();$(window).resize(responsiveTextPage)}
var $group=$('.layout-header-wide div.group:not(.tile), .layout-header-wide div.archive:not(.tile)');if($group.length>0){function centerGroup($group){var groupWidth=$group.width();var items=$group.children('.thumbs').children('li').length;var itemColumns=Math.floor(groupWidth/itemWidth);if(items<itemColumns)var itemColumns=items;var spaceUsed=itemWidth*itemColumns;$group.children('.thumbs').css({width:spaceUsed+'px'})}
$group.children('.thumbs').css({float:'none',margin:'0 auto'});var itemWidth=$group.children('.thumbs').children('li:first-child').outerWidth(!0);centerGroup($group,itemWidth);$group.addClass('opaque');$(window).resize(function(){centerGroup($group,itemWidth)})}
$('div.archive').addClass('opaque')};rsn.computedStyles.prototype.responsiveSidebar=function(){var $logo=$('header h1 a');var $nav=$('nav');var $footer=$('footer');var logoTop=$logo.data('top');var navTop=$nav.data('top');var navHeight=$nav[0].scrollHeight;var footerHeight=$footer.data('height');var windowHeight=$(window).height();var availableNavSpace=windowHeight-navTop-footerHeight;if(navHeight>availableNavSpace){$nav.addClass('scroll').css({height:availableNavSpace+'px'})}else{$nav.removeClass('scroll').css({height:'auto'})}};rsn.pages=function(){$(window).scroll(function(){if(typeof(loadNextPage)!="undefined"){clearTimeout(loadNextPage)}
loadNextPage=setTimeout(function(){if($(window).height()+$(window).scrollTop()>=$(document).height()-600){rsn.nextPage()}},250)})};rsn.nextPage=function(){var currentPage=$('.paged').attr('class').split(' ').pop().replace('page','')*1;var nextPage=currentPage+1;$('.paged').removeClass('page'+currentPage).addClass('page'+nextPage);var url="/"+tag+"?page="+nextPage;$('<div id="temporary"></div>').appendTo('body').load(url+' .paged > *',function(){$(this).children().each(function(){$(this).appendTo('.paged')});$(this).remove()})};rsn.forms=function(){var action="/actions"+$(this).attr('action');$(this).attr('action',action)};rsn.peek=function(){$('a').each(function(){var href=$(this).attr('href')+"?peek=true";$(this).attr('href',href)})};rsn.indexpage=function(page){if($('div.group').length<1&&$('div.archive').length<1){var page=page.replace('/','').toLowerCase();$('#page-'+page).addClass('index');$('.index .grid').addClass('archive').removeClass('grid');$('.index .thumbs > li > a').each(function(){var href=$(this).find('div').text().trim();$(this).attr('href',href)})}};$.expr[':'].icontains=function(obj,index,meta,stack){return(obj.textContent||obj.innerText||jQuery(obj).text()||'').toLowerCase().indexOf(meta[3].toLowerCase())>=0};rsn.dropdown=function(){if($('nav .accordion').length>0&&$('nav .dropdown').length>0){log('New drop down menus in use')}else{log('running oldschool drop down menu hack');$('nav').hide()
if($('body').hasClass('left')){$('nav').addClass('accordion');var menuType="accordion"}else{$('nav').addClass('dropdown2');var menuType="dropdown2"}
$('nav a[href*="#"]').each(function(){$this=$(this);var category=$(this).attr('href').replace('#','');$(this).parent().append('<ul></ul>');$('nav a:icontains("'+category+': ")').each(function(){var label=$(this).text().split(':')[1].toString();var label=$.trim(label);$(this).text(label);$(this).parent().appendTo($this.siblings('ul'))})});$('nav').show();$('nav ul ul').each(function(){$(this).show();$(this).css('height',$(this).height());$(this).hide()});$('nav > ul > li:has("ul") > a').click(function(){if(menuType=="accordion"){var $menu=$(this).siblings('ul');$menu.stop();if($menu.hasClass('expanded')){$menu.removeClass('expanded');$menu.slideUp('fast')}else{$menu.addClass('expanded');$menu.slideDown('fast')}}
return!1});if(menuType=="accordion")$('nav ul ul .selected').closest('ul').addClass('expanded').show()}};rsn.dropdown2=function(){$('nav .menu > a').click(function(e){e.preventDefault()});if($('nav').hasClass('accordion')){var menuType="accordion"}else if($('nav').hasClass('dropdown')){var menuType="dropdown"}
$('body').on('click','nav .accordion > a',function(e){e.preventDefault();var $this=$(this);var $menu=$this.siblings('ul');var animationSpeed=150;if($menu.hasClass('expanded')){var expanded=!0}else{var expanded=!1}
if(!expanded){$menu.parent().siblings().children('ul.expanded').animate({opacity:0},animationSpeed,function(){$(this).slideUp('fast',function(){$(this).removeClass('expanded').removeClass('expanded-onload')})});$menu.slideDown('fast',function(){$menu.animate({opacity:1},animationSpeed);rsn.computedStyles.prototype.responsiveSidebar()});$menu.addClass('expanded')}else{$menu.animate({opacity:0},animationSpeed,function(){$(this).slideUp('fast',function(){$(this).removeClass('expanded').removeClass('expanded-onload')})})}});$('nav').show()};rsn.imageTagalongs=function(){if(rsn.usingDownloadBlocker)rsn.blocker();if(rsn.usingShareButton)rsn.shareImage()};rsn.blocker=function(){rsn.usingDownloadBlocker=!0;var blocker='<img class="blocker" src="/images/blank.png" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;max-height:100%;">';rsn.findFullSizeImages().after(blocker);$('#billboard').append(blocker)};rsn.shareImage=function(){rsn.usingShareButton=!0;rsn.findFullSizeImages().each(function(){var $this=$(this);var url=window.location.href;if($this.data('src')){var image=$this.data('src')}else{var image=$this.prop('src')}
var thumbnail="";var description=$this.prop('alt');var facebookURL=url.split('#');var facebookURL=facebookURL[0]+"?image="+image+"#"+facebookURL[1];var properties=$.param({'u':facebookURL});var facebook="https://www.facebook.com/sharer/sharer.php?"+properties;var properties=encodeURIComponent(description+"\n"+url+"\n"+image);var twitter="//twitter.com/home?status="+properties;var properties=$.param({url:url,media:image,description:description});var pinterest="//www.pinterest.com/pin/create/button/?"+properties;$this.parent().append('<span class="rsn_share">\
				<a target="_blank" class="facebook" href="'+facebook+'" title="Share image on Facebook">Facebook</a>\
				<a target="_blank" class="twitter" href="'+twitter+'" title="Share image on Twitter">Twitter</a>\
				<a target="_blank" class="pinterest" href="'+pinterest+'" title="Pin image on Pinterest">Pinterest</a>\
			</span>')})};rsn.customFonts=function(){if(typeof custom_fonts!="undefined"){$.each(custom_fonts,function(){if(this.source!=""){$('head').append(this.source)}})}};rsn.wrapText=function(pages){if(typeof pages=="undefined"){var pages="body"}else{var pages=pages.split(',');$.each(pages,function(i){pages[i]="#page-"+pages[i].replace(/\s+/g,'')});var pages=pages.join(',')}
$(pages).each(function(){$('#sidebar img').prependTo('#main .body').addClass('right');$('#main').addClass('wide');$('#sidebar').remove()})};rsn.confirmation=function(){$('#confirmation .close').click(function(e){e.preventDefault();$('#confirmation').fadeOut('fast')})};rsn.cookiesNotice=function(){var $notice=$('#cookies-notice');if(typeof Cookies.get('cookiesNotice')==="undefined"){$notice.addClass('show')}
$notice.on('click','[href="#okay"]',function(e){e.preventDefault();$notice.removeClass('show');Cookies.set('cookiesNotice','okay',{expires:7})})};rsn.analytics=function(){var host=window.location.hostname.replace(/^www\./,'');$('body').append('<img id="stats" src="/stats/'+host+'" alt="">')}
rsn.fullScreenVideo=function(videos){var video=videos[Math.floor(Math.random()*videos.length)];$('#billboard').html(video);var $video=$('#billboard iframe');var $window=$(window);$video.css({position:"absolute"});function resizeFullscreenVideo(){var windowSize={width:$window.width(),height:$window.height()};var aspectRatioVideo=$video.width()/$video.height();var aspectRatioWindow=windowSize.width/windowSize.height;if(aspectRatioWindow>aspectRatioVideo){var newWidth=windowSize.width;var newHeight=newWidth/aspectRatioVideo;var newTop=(newHeight-windowSize.height)/-2;var newLeft=0}else{var newHeight=windowSize.height;var newWidth=newHeight*aspectRatioVideo;var newTop=0;var newLeft=(newWidth-windowSize.width)/-2}
$video.css({width:newWidth+"px",height:newHeight+"px",left:newLeft+"px",top:newTop+"px"})}
resizeFullscreenVideo();$(window).resize(resizeFullscreenVideo)};rsn.validateForm=function(event){log('Validating form');var $form=$(this);$form.find('.error').removeClass('error');$form.find('input, textarea').each(function(){var $input=$(this);if($input.prop('required')&&$input.val().length<1){event.preventDefault();log('missing field');$input.addClass('error')}})}
rsn.footerIcons=function(){$('footer .icons a').each(function(){var $this=$(this);var icon=$this.css('background-image');var icon=icon.replace('url(','').replace(')','').replace(/\"/gi,'');if(icon.match(/\.svg$/)){$.get(icon,function(data){var $svg=$(data).find('svg');$svg=$svg.removeAttr('xmlns:a');$this.addClass('link-icon').append($svg)},'xml')}else{$this.addClass('show')}})}
rsn.autoSizes=function(){$('img[data-sizes="auto"]').autoSizes();var sizesTimeout;$(window).resize(function(){clearTimeout(sizesTimeout);sizesTimeout=setTimeout(function(){log('Window resized');$('img[data-sizes="auto"]').autoSizes()},500)});MutationObserver=window.MutationObserver||window.WebKitMutationObserver;var observer=new MutationObserver(function(mutations,observer){$(mutations).each(function(){if(this.type=="childList"){clearTimeout(sizesTimeout);sizesTimeout=setTimeout(function(){log('child added: autosizes');$('img[data-sizes="auto"]').autoSizes()},200)}})});observer.observe(document.body,{subtree:!0,childList:!0,attributes:!1})};rsn.fitImage=function(frame,image,padding){if(typeof padding=="undefined")var padding=0;$frame=$(frame);$image=$(image);var frameWidth=$frame.width();var frameHeight=$frame.height();var dimensions=$image.data('dimensions').split('x');var originalWidth=dimensions[0];var originalHeight=dimensions[1];if(originalHeight*1+padding>frameHeight){log('resizing for height');var newHeight=frameHeight-padding;var ratio=newHeight/originalHeight;var newWidth=originalWidth*ratio}else{log('image is small enough to fit on screen');var newHeight=originalHeight;var newWidth=originalWidth}
if(newWidth*1+padding*1>frameWidth){log('Resizing to fit horizontal');var newWidth=frameWidth-padding;var ratio=newWidth/originalWidth;var newHeight=originalHeight*ratio}
$image.css({'width':newWidth+'px','height':newHeight+'px'})};rsn.compatibility=function(){if(!Modernizr.objectfit){function fixObjectFit(elements,style){$(elements).each(function(){var $this=$(this);var $container=$this.parent();var imgUrl=$this.prop('src');if(imgUrl){$container.css({'background-image':'url('+imgUrl+')','background-size':style,'background-position':'center center','background-repeat':'no-repeat'});$this.css({'opacity':0,'visibility':'hidden'})}})}
fixObjectFit('.carousel .images li img','contain');fixObjectFit('.bleed #billboard img','cover')}};$(function(){rsn.browserDetect();var $body=$('body');if($body.hasClass('layout-header-wide')){pageLayout="header-wide"}else if($body.hasClass('left')){pageLayout="left"}else if($body.hasClass('centered')){pageLayout="centered"}
rsn.markup();rsn.compatibility();rsn.footerIcons();if($('nav ul ul').length>0)rsn.dropdown2();rsn.ios();if($('#content .grid').not('.collage').length>0)lightbox.start('#content .grid');rsn.email();rsn.links();if($('body.left div.sidescroll').length>0)rsn.sideScroll.sidebar();if($('body.centered div.sidescroll').length>0)rsn.sideScroll.header();if($('.layout-header-wide div.sidescroll').length>0)rsn.sideScroll.headerWide();if($('.centered div.carousel').length>0)rsn.carousel.centered();if($('.left div.carousel').length>0)rsn.carousel.multi();if($('.layout-header-wide div.carousel').length>0)rsn.carousel.multi();if($('div.tile').length>0)rsn.tiles.setup();if($('div.blocks').length>0)rsn.blocks.setup();rsn.computedStyles();rsn.autoSizes();if($('#billboard').length>0)rsn.home.setup();if($('.paged').length>0)rsn.pages();$('.contact_form').each(rsn.forms);$('form').submit(rsn.validateForm);rsn.grid();rsn.customFonts();if(typeof peek!="undefined")rsn.peek();rsn.analytics();if($('#confirmation').length>0)rsn.confirmation();if($('#cookies-notice').length>0)rsn.cookiesNotice()})